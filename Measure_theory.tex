\documentclass{article}
\usepackage{graphicx} % Required for inserting images
\usepackage[english]{babel}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{enumitem} 
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{tikz}
\usetikzlibrary{matrix}
\usepackage[english]{babel}
\usepackage{mathtools}
\usepackage[a4paper, total={6in, 8in}]{geometry}
\usepackage{cite}


\newtheorem{theorem}{Theorem}[section]
\newtheorem{definition}[theorem]{Definition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{example}[theorem]{Example}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{exercise}[theorem]{Exercise}


\title{Measure Theory}
\author{Saxon Supple}
\date{January 2025}

\begin{document}

\maketitle

\begin{exercise}
Suppose $n \in \mathbb{N}$ and $X$ is a set with $n$ elements. Show that the power set $\mathcal{P}(X)$ has $2^n$ elements.
\end{exercise}
\begin{proof}
We proceed by induction on $n$. For $n=0$ then clearly $\mathcal{P}(X)=\{\emptyset\}$ has $1$ element. Assume it's true for $n=k$. Then for $n=k+1$ we can pick an element $x\in X$ and see that there are $2^k$ elements in $\mathcal{P}(X\setminus\{x\})$ by the inductive hypothesis. Every set in $\mathcal{P}(X)$ either does or does not contain $x$ so there are twice the number of elements in $\mathcal{P}(X)$ as there are in $\mathcal{P}(X\setminus\{x\})$. Thus $\mathcal{P}(X)$ has $2^{k+1}$ elements.
\end{proof}

\begin{exercise}
    Suppose $X$ is a non-empty set and $\mathcal{A}$ is an algebra in $X$. Show that for any $k \in \mathbb{N}$, if $A_i \in \mathcal{A}$ for $i = 1, 2, \ldots, k$ then $\bigcup_{i=1}^k A_i \in \mathcal{A}$.
\end{exercise}
\begin{proof}
We proceed by induction. For $n=1,2$ the statement is obvious. Assume true for $n=k$. Then if $A_i\in\mathcal{A}$ for $i=1,2,...,k,k+1$ we have $\bigcup_{i=1}^kA_i\in\mathcal{A}$ and so $\bigcup_{i=1}^{k+1}A_i=A_{k+1}\cup\bigcup_{i=1}^kA_i\in\mathcal{A}$. 
\end{proof}

\begin{exercise}
    Which of the following collections $\mathcal{M}$ of sets (in $X$) are $\sigma$-algebras? Which ones are algebras? Explain each answer.
    \begin{enumerate}
        \item $X = \{1, 2, 3, 4\}$, 
        \[
        \mathcal{M} = \{\emptyset, \{1\}, \{2\}, \{3, 4\}, \{1, 2\}, \{1, 3\}, \{2, 3, 4\}, \{1, 2, 3, 4\}\}.
        \]
        \item $X = \{1, 2, 3, \ldots \}$ and 
        \[
        \mathcal{M} = \{A \subset X : \text{either } A \text{ or } X \setminus A \text{ is finite}\}.
        \]
        \item $X$ is an uncountable set and 
        \[
        \mathcal{M} = \{A \subset X : \text{either } A \text{ or } X \setminus A \text{ is countable}\}.
        \]
        \item $X$ is any set, $\mathcal{M}_1 \subset \mathcal{M}_2 \subset \ldots$ are $\sigma$-algebras in $X$ and $\mathcal{M} = \bigcup_{n=1}^{\infty} \mathcal{M}_n$.
    \end{enumerate}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item $\sigma$-algebra (and hence an algebra) since it contains the empty set and is closed under complements and countable unions.
    \item Let $A_i=\{2i\}\in\mathcal{M}$. Then let $A=\bigcup_{i=1}^\infty A_i$. Neither $A$ nor $X\setminus A$ is finite so $A\not\in\mathcal{M}$. Thus $\mathcal{M}$ is not a $\sigma$-algebra. $\emptyset$ is finite so $\emptyset\in\mathcal{M}$. Let $P,Q\in\mathcal{M}$. If $P$ is finite then $X\setminus(X\setminus P)=P$ is finite so $X\setminus P\in\mathcal{M}$. If $X\setminus P$ is finite then $X\setminus P\in\mathcal{M}$. Thus $\mathcal{M}$ is closed under complements. If $P$ and $Q$ are finite then $P\cup Q$ is finite so $P\cup Q\in\mathcal{M}$. If $X\setminus P$ and $X\setminus Q$ are finite then $X\setminus(P\cup Q)=(X\setminus P)\cap(X\setminus Q)$ is finite so $P\cup Q\in\mathcal{M}$. Without loss of generality let $P$ be finite and let $X\setminus Q$ be finite. Then $X\setminus(P\cup Q)=(X\setminus P)\cap(X\setminus Q)$ is finite so $P\cup Q\in\mathcal{M}$. Thus $\mathcal{M}$ is an algebra.
    \item $\emptyset$ is countable so $\emptyset\in\mathcal{M}$. Like in part $(2)$ $\mathcal{M}$ is closed under complements. Let $A_1,A_2,...$ be a collection of sets in $\mathcal{M}$. If every set is countable then $\bigcup_{i=1}^\infty A_i$ is countable since the union of countably many countable sets is countable. If $X\setminus A_k$ countable for some $k$ then $X\setminus\bigcup_{i=1}^\infty A_i=\bigcap_{i=1}^\infty X\setminus A_i\subseteq X\setminus A_k$ is countable. Thus $\mathcal{M}$ is a $\sigma$-algebra.
    \item $\emptyset\in\mathcal{M}_1$ so $\emptyset\in\mathcal{M}$. Let $A\in\mathcal{M}$. Then $A\in\mathcal{M}_i$ for some $i$ so $A^c\in\mathcal{M}_i\subseteq\mathcal{M}$. Thus $\mathcal{M}$ is closed under complements. Let $A,B\in\mathcal{M}$. Then $A,B\in\mathcal{M}_n$ for some $n$ so $A\cup B\in\mathcal{M}_n\subseteq\mathcal{M}$. Thus $\mathcal{M}$ is an algebra.

    Let $X=\mathbb{N}$ and let $\mathcal{M}_i=\{A\subseteq X:A\subseteq\{1,2,...,i\}\text{ or }A^c\subseteq\{1,2,...,i\}\}$. $\emptyset\subseteq\{1,2,...,i\}$ so $\emptyset\in\mathcal{M}_i$. $\mathcal{M}_i$ is clearly closed under complements. Let $A_1,A_2,...\in\mathcal{M}_i$. Suppose every $A_k\subseteq\{1,2,...,i\}$. Then $\bigcup_{k=1}^\infty A_k\subseteq\{1,2,...,i\}$ so $\bigcup_{k=1}^\infty A_k\in\mathcal{M}_i$. Suppose there exists an $A_l$ such that $A_l^c\in\{1,2,...,i\}$. Then $(\bigcup_{k=1}^\infty A_k)^c=\bigcap_{k=1}^\infty A_k^c\subseteq A_l^c\subseteq\{1,2,...,i\}$. Thus each $\mathcal{M}_i$ is a $\sigma$-algebra. Furthermore, $A\subseteq\{1,2,...,i\}$ or $A^c\subseteq\{1,2,...,i\}\implies A\subseteq\{1,2,...,i,i+1\}$ or $A^c\subseteq\{1,2,...,i,i+1\}$ so $\mathcal{M}_i\subseteq\mathcal{M}_{i+1}$. Let $A_i=\{2i\}\in\mathcal{M}_{2i}\subseteq\mathcal{M}$. Then $A:=\bigcup_{k=1}^\infty A_k=2\mathbb{N}$. Suppose $A\in\mathcal{M}$. Then there is an $i$ such that $A\in\mathcal{M}_i$. However $A$ is unbounded so neither $A$ nor $A^c$ is contained in $\{1,2,...,i\}$; a contradiction. Thus $\mathcal{M}$ is not a $\sigma$-algebra.
\end{enumerate}
\end{proof}

\begin{exercise}
    Given numbers $x_{ij} \geq 0$ defined for each $i \in \mathbb{N}, j \in \mathbb{N}$, show that 
    \[
    \sum_{i=1}^{\infty} \left(\sum_{j=1}^{\infty} x_{ij}\right) = \sum_{j=1}^{\infty} \left(\sum_{i=1}^{\infty} x_{ij}\right).
    \]
    [\textit{Hint: first show a (weak) inequality between the two double sums.}]
\end{exercise}
\begin{proof}
$\sum_{i=1}^{\infty} \left(\sum_{j=1}^{\infty} x_{ij}\right)=\lim_{N\to\infty}\sum_{i=1}^N(\sum_{j=1}^\infty x_{ij})$. Thus given any $a<\sum_{i=1}^{\infty} \left(\sum_{j=1}^{\infty} x_{ij}\right)$ there exists an $N\in\mathbb{N}$ such that $\sum_{i=1}^N(\sum_{j=1}^\infty x_{ij})>a$. $\sum_{i=1}^N(\sum_{j=1}^\infty x_{ij})=\sum_{i=1}^N(\lim_{M\to\infty}\sum_{j=1}^M x_{ij})=\lim_{M\to\infty}\sum_{i=1}^N(\sum_{j=1}^M x_{ij})>a$ so there exists an $M\in\mathbb{N}$ such that $\sum_{i=1}^N(\sum_{j=1}^M x_{ij})>a$. $\sum_{i=1}^N(\sum_{j=1}^M x_{ij})=\sum_{j=1}^M(\sum_{i=1}^N x_{ij})>a$ and so $\sum_{j=1}^\infty(\sum_{i=1}^\infty x_{ij})> a$. This is true for every $a<\sum_{i=1}^{\infty} \left(\sum_{j=1}^{\infty} x_{ij}\right)$ so $\sum_{i=1}^{\infty} \left(\sum_{j=1}^{\infty} x_{ij}\right)\leq\sum_{j=1}^\infty(\sum_{i=1}^\infty x_{ij})$. Similarly $\sum_{j=1}^\infty(\sum_{i=1}^\infty x_{ij})\leq \sum_{i=1}^{\infty} \left(\sum_{j=1}^{\infty} x_{ij}\right)$ and so $\sum_{i=1}^{\infty} \left(\sum_{j=1}^{\infty} x_{ij}\right) = \sum_{j=1}^{\infty} \left(\sum_{i=1}^{\infty} x_{ij}\right)$.
\end{proof}
\begin{exercise}
    Suppose $X$ is a non-empty set and $\mathcal{X} = \{A_1, A_2, \ldots, A_k\}$, where the sets $A_1, \ldots, A_k$ are non-empty and form a partition of $X$, i.e., they are pairwise disjoint and $\bigcup_{i=1}^{k} A_i = X$. Show that 
    \[
    \sigma(\mathcal{X}) = \{\bigcup_{j \in J} A_j : J \subset \{1, 2, \ldots, k\}\}.
    \]
\end{exercise}
\begin{proof}
We shall refer to $\{\bigcup_{j \in J} A_j : J \subset \{1, 2, \ldots, k\}\}$ as $\mathcal{B}$. $\emptyset=\bigcup_{j\in\emptyset}A_j\in\mathcal{B}$. Let $P\in\mathcal{B}$. Then $P=\bigcup_{j\in J}A_j$ for some $J\subseteq\{1,2,...,k\}$ so $P^c=\bigcup_{j\in J^c}A_j\in\mathcal{B}$. Let $P_1,P_2,...\in\mathcal{B}$ so that each $P_i=\bigcup_{j\in J_i}A_j$ for some $J_i\subseteq\{1,2,...,k\}$. Then $\bigcup_{i=1}^\infty P_i=\bigcup_{i=1}^\infty\bigcup_{j\in J_i}A_j=\bigcup_{j\in\bigcup_{i=1}^\infty J_i}A_j\in\mathcal{B}$ since $\bigcup_{i=1}^\infty J_i\subseteq\{1,2,...,k\}$. Thus $\mathcal{B}$ is indeed a $\sigma$-algebra. Now suppose that $\mathcal{M}$ is another $\sigma$-algebra such that $\mathcal{X}\subseteq\mathcal{M}$. Clearly $\mathcal{B}\subseteq\mathcal{M}$ and so $\mathcal{B}$ is the smallest $\sigma$-algebra containing $\mathcal{X}$ so $\sigma(\mathcal{X})=\mathcal{B}$.
\end{proof}
\begin{exercise}
    Suppose $X$ is a non-empty set and $\mathcal{X} = \{A_1, A_2, A_3, \ldots\}$, where the sets $A_i, i \geq 1$ are non-empty and form a countably infinite partition of $X$, i.e., they are pairwise disjoint and $\bigcup_{i=1}^{\infty} A_i = X$.
    \begin{enumerate}
        \item Describe the sets in the $\sigma$-algebra generated by $\mathcal{X}$.
        \item Describe the sets in the algebra generated by $\mathcal{X}$.
    \end{enumerate}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item Let $\mathcal{M}=\{\bigcup_{j\in J}A_j:J\subseteq\mathbb{N}\}$. $\emptyset\in\mathcal{M}$. Let $A:=\bigcup_{i\in I}A_j,I\subseteq\mathbb{N}$. Then $A^c=\bigcup_{i\in I^c}A_j\in\mathcal{M}$ since $I^c\subseteq\mathbb{N}$. Let $P_i=\bigcup_{j\in J_i}A_j$ for some $J_i\subseteq\mathbb{N}$. Then $\bigcup_{i=1}^\infty P_i=\bigcup_{i=1}^\infty\bigcup_{j\in J_i}A_j=\bigcup_{j\in\bigcup_{i=1}^\infty J_i}A_j\in\mathcal{M}$ since $\bigcup_{i=1}^\infty J_i\subseteq\mathbb{N}$. Thus $\mathcal{M}$ is a $\sigma$-algebra and is clearly the smallest one containing $\mathcal{X}$ so is the $\sigma$-algebra generated by $\mathcal{X}$.
    \item Let $\mathcal{M}=\{\bigcup_{j\in J}A_j:J\subseteq\mathbb{N},J\text{ is finite or }J^c\text{ is finite}\}$. $\emptyset\in\mathcal{M}$. let $\bigcup_{j\in J}A_j\in\mathcal{M}$. If $J$ is finite then $(J^c)^c$ is finite and if $J^c$ is finite then $J^c$ is finite so $(\bigcup_{j\in J}A_j)^c=\bigcup_{j\in J^c}A_j\in\mathcal{M}$. Let $P_1,P_2\in\mathcal{M}$ where each $P_i=\bigcup_{j\in J_i}A_j$ so that $P_1\cup P_2=\bigcup_{j\in J_1\cup J_2}A_j$. If both $J_i$ are finite then $J_1\cup J_2$ is finite. If (without loss of generality) $J_1^c$ is finite then $(J_1\cup J_2)^c=J_1^c\cap J_2^c$ is finite. Thus $P_1\cup P_2\in\mathcal{M}$. $\mathcal{M}$ is then clearly the smallest algebra containing $\mathcal{X}$ so is the algebra generated by $\mathcal{X}$.
\end{enumerate}
\end{proof}
\begin{exercise}
Suppose $X = (0, 7]$ and $C = \{(0, 2], (1, 5]\}$. Write down the sets in $\sigma(C)$.
\end{exercise}
\begin{proof}
$(0,2]^c=(2,7],(1,5]^c=(0,1]\cup(5,7]$.

$(0,2]\cup(1,5]=(0,5]$.

$(0,5]^c=(5,7]$.

$(5,7]\cup(0,5]=X$.

Thus $\sigma(\mathcal{C})\supseteq \mathcal{M}:=\{\emptyset,(0,2],(1,5],(0,1]\cup(5,7],(0,5],(5,7],(0,7],(0,2]\cup(5,7],(1,7],(2,5],(0,1],(0,1]\cup(2,5],(1,2]\cup(5,7],(2,7],(1,2],(0,1]\cup(2,7]\}$. $\mathcal{P}:=\{(0,1],(1,2],(2,5],(5,7]\}$ is a partition of $X$ so $\sigma(\mathcal{P})$ has $16$ elements. $\mathcal{C}\subseteq\sigma(\mathcal{P})$ so $\mathcal{M}\subseteq\sigma(\mathcal{P})$. $\mathcal{M}$ also has $16$ elements so $\mathcal{M}=\sigma(\mathcal{P})$. Thus $\sigma(\mathcal{C})=\mathcal{M}$.
\end{proof}

\begin{exercise}
    Let
    \[
    \begin{aligned}
        \mathcal{O} &= \{G \subset \mathbb{R} : G \text{ is open}\}; \\
        \mathcal{H} &= \{F \subset \mathbb{R} : F \text{ is closed}\}; \\
        \mathcal{K} &= \{K \subset \mathbb{R} : K \text{ is compact}\}; \\
        \mathcal{D} &= \{F \subset \mathbb{R} : F = (-\infty, q] \text{ for some } q \in \mathbb{Q}\}.
    \end{aligned}
    \]
    (Recall that $K$ is compact iff $K$ is closed and bounded.) Recall that the collection $\mathcal{B}$ of Borel sets in $\mathbb{R}$ is defined by $\mathcal{B} = \sigma(\mathcal{O})$.
    \begin{enumerate}
        \item Construct a Borel set that is neither open nor closed, that is, it is in $\mathcal{B} \setminus (\mathcal{O} \cup \mathcal{H})$.
        \item Prove that $\sigma(\mathcal{K}) = \mathcal{B}$.
        \item Prove that $\sigma(\mathcal{D}) = \mathcal{B}$.
    \end{enumerate}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item $(1,2]$.
    \item $\mathcal{K}\subseteq\mathcal{H}$ so $\sigma(\mathcal{K})\subseteq\sigma(\mathcal{H})=\mathcal{B}$. Let $U\in\mathcal{O}$. Then for each $x\in U$ we can find $q,r\in\mathbb{Q}$ such that $x\in[q,r]$ and hence $U=\bigcup_{(q,r)\in\mathbb{Q}^2,[q,r]\subseteq U}[q,r]$ which is an element of $\sigma(\mathcal{K})$ since closed intervals are bounded and $\mathbb{Q}^2$ is countable. Thus $\mathcal{O}\subseteq\sigma(\mathcal{K})$ and so $\sigma(\mathcal{K})=\mathcal{B}$.
    \item Let $a,b\in\mathbb{Q}$ with $a< b$. Then $(a,b]=(-\infty,a]^c\cap(-\infty,b]\in\sigma(\mathcal{D})$. Let $x\in\mathbb{Q},y\in\mathbb{R}$ such that $x<y$. By the density of $\mathbb{Q}$ in $\mathbb{R}$ there exists a decreasing sequence $(x_n)_{n\in\mathbb{N}}\in\mathbb{Q}$ such that $\lim_{n\to\infty}x_n=x$. Let $A:=\bigcup_{n=1}^\infty(x_n,y]\subseteq(x,y]$. Let $\epsilon>0$ such that $x+\epsilon\leq y$. Then $\exists N\in\mathbb{N}:x_N<x+\epsilon$ and so $x+\epsilon\in(x_N,y]\subseteq A$. Thus $(x,y]\subseteq A$ and so $(x,y]=A$. Thus $\sigma(\mathcal{D})$ contains all sets of the form $(x,y],x\in\mathbb{R},y\in\mathbb{Q}$. Now consider $(x,y]$ where both $x,y\in\mathbb{R}$. By the density of $\mathbb{Q}$ in $\mathbb{R}$ there exists a decreasing sequence $(y_n)_{n\in\mathbb{N}}\in\mathbb{Q}$ such that $\lim_{n\to\infty}y_n=y$. Let $A:=\bigcap_{n=1}^\infty(x,y_n]\supseteq(x,y]$. Let $t>y$. Then $\exists N\in\mathbb{N}$ such that $y_N<t$ and hence $t\not\in(x,y_N]$. Thus $(x,y]=A$ and hence $\mathcal{I}\subseteq\sigma(\mathcal{D})$, implying $\sigma(\mathcal{I})=\mathcal{B}\subseteq\sigma(\mathcal{D})$. Let $(-\infty,q]\in\mathcal{D}$. Let $A:=\bigcup_{n=1}^\infty(-n,q]\in\sigma(\mathcal{I})$. Then given any $x<q:\exists N\in\mathbb{N}:-N<x$ and so $x\in A$. Thus $A=(-\infty,q]$ and hence $\mathcal{D}\subseteq\sigma(\mathcal{I})=\mathcal{B}\implies\sigma(\mathcal{D})\subseteq\mathcal{B}$. Thus $\sigma(\mathcal{D})=\mathcal{B}$.
\end{enumerate}
\end{proof}
\begin{exercise}
    Show that the examples described just after Definition 3.1 are indeed measures. 
    [\textit{Hint: you may find Exercise 4 useful here.}]
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item Counting measure: $\mu(\emptyset)=0$. Let $A_1,A_2,...\in\mathcal{M}$ be pairwise disjoint. If there exists an $N\in\mathbb{N}$ such that $A_n=\emptyset\forall n>N$ then $\bigcup_{i=1}^\infty A_i=\bigcup_{i=1}^N A_i$ so $\mu(\bigcup_{i=1}^\infty A_i)=\#\text{ of elements of }\bigcup_{i=1}^N A_i=\sum_{i=1}^N\mu(A_i)=\sum_{i=1}^\infty\mu(A_i)$. Otherwise, $\mu(\bigcup_{i=1}^\infty A_i)=\infty=\sum_{i=1}^\infty A_i$.
    \item Dirac measure: $\delta_x(\emptyset)=0$ since $x\not\in\emptyset$. Let $A_1,A_2,...\in\mathcal{M}$ be pairwise disjoint. Suppose $x\in\bigcup_{i=1}^\infty A_i$ so that $\delta_x(\bigcup_{i=1}^\infty A_i)=1$. Since the $A_i$'s are disjoint there is a single $A_i$ for which $\delta_x(A_i)=1$ and every other set does not include $x$. Thus $\sum_{i=1}^\infty \delta_x(A_i)=1$. Now suppose $x\not\in\bigcup_{i=1}^\infty A_i$ so that $\delta_x(\bigcup_{i=1}^\infty A_i)=0$. Then $\delta_x(A_i)=0\forall i$ so $\sum_{i=1}^\infty\delta_x(A_i)=0$.
    \item Scalar multiples of measures: $(a\mu)(\emptyset)=a\cdot 0=0$. $\sum_{i=1}^\infty(a\mu)(A_i)=a\sum_{i=1}^\infty\mu(A_i)=a\mu(\bigcup_{i=1}^\infty A_i)=(a\mu)(\bigcup_{i=1}^\infty A_i)$.
    \item Countable sums of measures: $(\sum_{i=1}^\infty\mu_i)(\emptyset)=\sum_{i=1}^\infty\mu_i(\emptyset)=\sum_{i=1}^\infty 0 = 0$. $(\sum_{i=1}^\infty\mu_i)(\bigcup_{n=1}^\infty A_n)=\sum_{i=1}^\infty \mu_i(\bigcup_{n=1}^\infty A_n)=\sum_{i=1}^\infty(\sum_{n=1}^\infty \mu_i(A_n))=\sum_{n=1}^\infty(\sum_{i=1}^\infty \mu_i(A_n))=\sum_{n=1}^\infty(\sum_{i=1}^\infty\mu_i)(A_n)$.
    \item Discrete measures: $\mu(\emptyset)=\sum_{i\in\emptyset}m_i=0$. $\mu(\bigcup_{n=1}^\infty A_n)=\sum_{i\in\bigcup_{n=1}^\infty A_n}m_i=\sum_{n=1}^\infty(\sum_{i\in A_n}m_i)=\sum_{n=1}^\infty\mu(A_n)$.
\end{enumerate}
\end{proof}
\begin{exercise}
    Let $\mu$ be a measure on $(\mathbb{R}, \mathcal{B})$ with $\mu(\mathbb{R}) < \infty$. For $x \in \mathbb{R}$, set $F(x) = \mu((-\infty, x])$. Show that $F$ is nondecreasing and right continuous. [A function $f : \mathbb{R} \to \mathbb{R}$ is right continuous if for all $x \in \mathbb{R}$ and $\epsilon > 0$ there exists $\delta > 0$ such that if $x < y < x + \delta$ then $|f(y) - f(x)| < \epsilon$.]
\end{exercise}
\begin{proof}
Let $a<b$. Then $F(b)=\mu((-\infty,b])=\mu((-\infty,a])+\mu((a,b])\geq F(a)$.

Let $x\in\mathbb{R}$ and let $\epsilon>0$.
Define $A_1,A_2,...\in\mathcal{B}$ by $A_n=(-\infty,x+\frac{1}{n}]$ so that $\bigcap_{n=1}^\infty A_n=(-\infty,x]$. Then by downwards continuity we have $\lim_{n\to\infty}\mu(A_n)=F(x)$ so $\exists N\in\mathbb{N}$ such that $F(x+\frac{1}{N})<F(x)+\epsilon$. Let $\delta:=\frac{1}{N}$. Then $\forall y$ such that $x<y<x+\delta$ we have $|F(y)-F(x)|<F(x)+\epsilon-F(x)=\epsilon$.
\end{proof}
\begin{exercise}
    \begin{enumerate}
        \item Give an example of a measure space $(X, \mathcal{M}, \mu)$ and a sequence of sets $A_1 \supset A_2 \supset A_3 \supset \ldots$ with each $A_i \in \mathcal{M}$, such that $\mu(\bigcap_{n=1}^{\infty} A_n) \neq \lim_{n \to \infty} \mu(A_n)$.
        \item Give an example of a measurable space $(X, \mathcal{M})$ and a set function $\mu : \mathcal{M} \to [0, \infty]$ such that $\mu$ is finitely additive but not countably additive. 
        [\textit{Hint: In both cases we can take $X = \mathbb{N}$.}]
    \end{enumerate}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item Let $X=\mathbb{N}$ and let $\mathcal{M}=\mathcal{P}(X)$. Let $\mu$ be the counting measure and let $A_n=2^n\mathbb{N}$. Then $\bigcap_{n=1}^\infty A_n=\emptyset$ since given any $i\in\mathbb{N}$ we have $i\not\in A_{i}$, and so $\mu(\bigcap_{n=1}^\infty A_n)=0$. However, $\mu(A_n)=\infty\forall n$ so $\lim_{n\to\infty}\mu(A_n)=\infty$.
    \item Let $X=\mathbb{N}$, let $\mathcal{M}=\mathcal{P}(X)$ and let $\mu(A)=\infty$ if $A$ is infinite and $0$ if $A$ is finite. Let $A_n=\{n\}$. Then $\mu(\bigcup_{n=1}^\infty A_n)=\mu(\mathbb{N})=\infty$ whereas $\sum_{n=1}^\infty\mu(A_n)=0$.
\end{enumerate}
\end{proof}
\begin{exercise}
    Suppose $X$ is a non-empty set and $\mathcal{X} = \{A_1, A_2, \ldots\}$ is a partition of $X$ with $A_i \neq \emptyset$ for each $i \in \mathbb{N}$. Suppose $(a_1, a_2, a_3, \ldots)$ is a sequence of nonnegative numbers. Show that there is a unique measure $\mu$ on the measurable space $(X, \sigma(\mathcal{X}))$ with $\mu(A_i) = a_i$ for all $i \in \mathbb{N}$.
\end{exercise}
\begin{proof}
Define a set function $\mu:\sigma(\mathcal{X})\to[0,\infty]$ by $\mu(\bigcup_{j\in J}A_j)=\sum_{j\in J}a_j$ given $J\subseteq\mathbb{N}$. This defines $\mu$ for all elements of $\sigma(\mathcal{X})$. $\mu(\emptyset)=\sum_{j\in\emptyset}a_j=0$. Given pairwise disjoint $\bigcup_{j\in j_1}A_j,\bigcup_{j\in j_2}A_j,...$ (meaning that $J_1,J_2,...$ are pairwise disjoint) we have $\mu(\bigcup_{i=1}^\infty\bigcup_{j\in J_i}A_j)=\mu(\bigcup_{j\in\bigcup_{i=1}^\infty J_i}A_j)=\sum_{j\in\bigcup_{i=1}^\infty J_i}a_j=\sum_{i=1}^\infty(\sum_{j\in J_i}a_j)=\sum_{i=1}^\infty\mu(\bigcup_{j\in J_i}A_j)$. Thus $\mu$ is a measure. Now suppose that $\nu$ is another measure satisfying $\nu(A_i)=a_j\forall i\in\mathbb{N}$. Then $\nu(\bigcup_{j\in J}A_j)=\sum_{j\in J}a_j=\mu(\bigcup_{j\in J}A_j)=\sum_{j\in J}a_j\forall J\subseteq\mathbb{N}$ so $\nu=\mu$.
\end{proof}

\begin{exercise}
Show that if $A \subset \mathbb{R}$ is countable then $A \in \mathcal{B}$ and $\lambda_1(A) = 0$.
\end{exercise}
\begin{proof}
Let $x\in\mathbb{R}$ ($\{x\}$ is also a Borel set since $x=((-\infty,x)\cup(x,\infty))^c$). Then $x\in(x-\frac{1}{n},x]\forall n\in\mathbb{N}$ so $0\leq\lambda_1(\{x\})\leq \lambda((x-\frac{1}{n},x])=\frac{1}{n}\forall n$ so $\lambda_1(\{x\})=0$. Now enumerate the elements of $A$ as $x_1,x_2,x_3,...\in\mathbb{R}$ (allowing for possible repetitions for if $A$ is finite) so that $A=\bigcup_{i=1}^\infty\{x_i\}$. Then by countable sub-additivity $0\leq\lambda_1(A)\leq\sum_{i=1}^\infty\lambda_1(\{x_i\})=0$.
\end{proof}
\begin{exercise}
    Show that for any interval $I$ with left endpoint $a$ and right endpoint $b$ we have $\lambda_1(I) = b - a$ (regardless of whether $a, b \in I$ or not).
\end{exercise}
\begin{proof}
If $I=(a,b]$ then $\lambda_1((a,b])=\lambda((a,b])=b-a$.
If $I=(a,b)$ then $\lambda_1((a,b))=\lambda_1((a,b])-\lambda_1(\{b\})=b-a-0=b-a$.
etc.
\end{proof}
\begin{exercise}
    Give an example of a Borel set $A \subset \mathbb{R}$ with $\lambda_1(A) > 0$ but with no non-empty open interval contained in $A$.
\end{exercise}
\begin{proof}
$\mathbb{R}\setminus\mathbb{Q}$.
\end{proof}
\begin{exercise}
    Given $\epsilon > 0$, give an example of an open set $U \subset \mathbb{R}$ with $\lambda_1(U) < \epsilon$ that is dense in $\mathbb{R}$, i.e., has non-empty intersection with every non-empty open interval in $\mathbb{R}$.
\end{exercise}
\begin{proof}
Let $x_1,x_2,x_2,...$ be an enumeration of $\mathbb{Q}$. Let $U=\bigcup_{i=1}^\infty(x_i-\frac{\epsilon}{2^{i+2}},x_i+\frac{\epsilon}{2^{i+2}})$. Then $\lambda_i(U)\leq\sum_{i=1}^\infty\frac{2\epsilon}{2^{i+2}}=\frac{\epsilon}{2}\sum_{i=1}^\infty\frac{1}{2^i}=\frac{\epsilon}{2}<\epsilon$.
\end{proof}
\begin{exercise}
    Suppose $A \subset \mathbb{R}$ is a bounded Borel set. Show that for all $\epsilon > 0$ there exists a set $U$ which is a finite union of intervals, such that $\lambda_1(A \Delta U) < \epsilon$, where $A \Delta U := (A \cup U) \setminus (A \cap U)$. 
    [\textit{Hint: use the fact that $\lambda_1(A) = \lambda^*(A)$.}]
\end{exercise}
\begin{proof}
$\lambda_1(A)=\text{inf }\{\sum_{n=1}^\infty\lambda(I_n):A\subseteq\bigcup_{n=1}^\infty I_n;I_1,I_2,...\in \overline{I}\}$ so by properties of infimums there exists $I_1,I_2,..\in\overline{I}$ such that $A\subseteq \bigcup_{n=1}^\infty I_n$ and $\lambda_1(\bigcup_{n=1}^\infty I_n)\leq\sum_{n=1}^\infty\lambda_1(I_n)<\frac{\epsilon}{2}+\lambda_1(A)$. Let $S:=\bigcup_{n=1}^\infty I_n$ and let $S_N:=\bigcup_{n=1}^N I_n$. Then by upward continuity $\lambda_1(S)=\lim_{N\to\infty}\lambda_1(S_N)$. Thus $\exists K\in\mathbb{N}$ such that $\lambda_1(S)-\lambda_1(S_K)<\frac{\epsilon}{2}$. \[A\setminus S_K\subseteq S\setminus S_K\] so \[\lambda_1(A\setminus S_K)\leq\lambda_1(S\setminus S_K)=\lambda_1(S)-\lambda_1(S_k)<\frac{\epsilon}{2}.\] $S_K\setminus A\subseteq S\setminus A$ so $\lambda_1(S_K\setminus A)\leq\lambda_1(S\setminus A)=\lambda_1(S)-\lambda_1(A)<\frac{\epsilon}{2}$. Thus \[\lambda_1(S_K\Delta A)=\lambda_1(S_K\setminus A)+\lambda_1(A\setminus S_K)<\frac{\epsilon}{2}+\frac{\epsilon}{2}=\epsilon.\]
\end{proof}
\begin{exercise}
    In this question we write $\lambda^*(A)$ for the Lebesgue outer measure of $A$.
    \begin{enumerate}
        \item What is the definition of the \textit{Lebesgue outer measure} of a set $A \subset \mathbb{R}$?
        \item Show that for any (not necessarily Borel) $A \subset \mathbb{R}$ there exists a Borel set $B \subset \mathbb{R}$ with $A \subset B$ and $\lambda_1(B) = \lambda^*(A)$.
        \item Suppose $A \subset \mathbb{R}$ is a Borel set with $\lambda_1(A) > 0$. Using the fact that $\lambda_1(A) = \lambda^*(A)$, show that for any $\epsilon > 0$ there exists a non-empty half-open interval $I$ with $\lambda_1(A \cap I) \geq (1 - \epsilon)\lambda_1(I)$.
        \item Show that the set $A \ominus A := \{x - y : x, y \in A\}$ includes a non-empty half-open interval.
    \end{enumerate}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item $\lambda^*(A)=\text{inf }\{\sum_{n=1}^\infty\lambda(I_n):A\subseteq\bigcup_{n=1}^\infty I_n,I_1,I_2,...\in\overline{I}\}$.
    \item Given any $N\in\mathbb{N}$ there exists a countable union $A_N\in\mathcal{B}$ of elements in $\overline{I}$ such that $A\subseteq A_N$ and $\lambda^*(A)\leq\lambda_1(A_N)<\lambda^*(A)+\frac{1}{N}$. Let $S_N:=\bigcap_{n=1}^N A_n\in\mathcal{B}$ and let $S:=\bigcap_{n=1}^\infty A_n\in\mathcal{B}$. By downwards continuity $\lambda_1(S)=\lim_{N\to\infty}\lambda_1(S_N)$. $A\subseteq S_N\subseteq A_N$ so \[\lambda^*(A)\leq\lambda_1(S_N)<\lambda^*(A)+\frac{1}{N}\forall N,\] implying that $\lim_{N\to\infty}\lambda_1(S_N)=\lambda^*(A)$ and hence $\lambda_1(S)=\lambda^*(A)$.
    \item First let $A$ be bounded. Suppose for a contradiction that there exists an $\epsilon>0$ such that  $\lambda_1(A\cap I)<(1-\epsilon)\lambda_1(I)$ for every non-empty half-open interval $I$. Clearly $\epsilon<1$. Let $\delta>0$ be such that $(1-\epsilon)(1+\delta)<1$. We have a countable union of half-open intervals $S=\bigcup_{n=1}^\infty I_n$ with $A\subseteq S$ such that $\sum_{n=1}^\infty\lambda_1(I_n)<\lambda_1(A)+\delta$. We also have \[\lambda_1(A)\leq\sum_{n=1}^\infty\lambda_1(A\cap I_n)<(1-\epsilon)\sum_{n=1}^\infty\lambda_1(I_n)\] so $\lambda_1(A)<(1-\epsilon)(1+\delta)\lambda_1(A)$; a contradiction.

    Now let $A$ be unbounded. Let $A_n:=A\cap[-n,n]$ so that $A_n\subseteq A_{n+1}\forall n$ and $A=\bigcup_{i=1}^\infty A_i$. $\lambda_1(A)=\lim_{n\to\infty}\lambda_1(A_n)$ so $\exists N\in\mathbb{N}$ such that $\lambda_1(A_N)>0$. Hence \[\lambda_1(A\cap I)\geq\lambda_1(A_N\cap I)\geq(1-\epsilon)\lambda_1(I)\] for some non-empty half-open interval $I$.
    \item Suppose that $A\ominus A$ does not contain a non-empty half-open interval. Then $\forall\epsilon>0$ there exists a non-empty half-open interval $I$ with $\lambda_1(A\cap I)\geq(1-\epsilon)\lambda_1(I)\geq\lambda_1(I\cap A\ominus A)$.

    There exists a non-empty half-open interval $I$ such that $\lambda_1(A\cap I)\geq0.999\lambda_1(I)$. Suppose $z\not\in A\ominus A$. Then $\forall x,y\in A$ we have $z\neq x-y$ so $x\neq z+y$. Hence $(z+A)\cap A=\emptyset$ so $z+A\subseteq A^c$. Let $\delta$ be such that $I=(a,a+\delta]$. Suppose that $z\in(0,\frac{\delta}{2}]$ and $z\not\in A\ominus A$. Then $(a,a+\frac{\delta}{2}]+z\subseteq(a,a+\delta]$ and so $z+(a,a+\frac{\delta}{2}]\cap A\subseteq A^c\cap(a,a+\delta]$. Hence \begin{align*}\lambda_1(A\cap(a,a+\frac{\delta}{2}])&\leq\lambda_1(A^c\cap(a,a+\delta])\\&=\lambda_1((a,a+\delta])-\lambda_1(A\cap(a,a+\delta])\\&\leq \delta-0.999\delta=0.001\delta.\end{align*} Furthermore \begin{align*}\lambda_1(A^c\cap(a,a+\delta])&\geq\lambda_1(A\cap(a,a+\frac{\delta}{2}])\\&=\lambda_1(A\cap(a,a+\delta])-\lambda_1(A\cap(a+\frac{\delta}{2},a+\delta])\\&\geq0.999\delta-0.5\delta=0.499\delta;\end{align*} a contradiction. hence $(0,\frac{\delta}{2}]\subseteq A\ominus A$.
\end{enumerate}


\end{proof}
\begin{exercise}
    Suppose $X$ is a non-empty set and $\mathcal{D}$ is a $\pi$-system in $X$. Show that for any $k \in \mathbb{N}$, if $A_i \in \mathcal{D}$ for $i = 1, 2, \ldots, k$ then $\bigcap_{i=1}^{k} A_i \in \mathcal{D}$.
\end{exercise}
\begin{proof}
Induction.
\end{proof}
\begin{exercise}
    Let $\mathcal{I}$ denote the class of half-open intervals in $\mathbb{R}$, together with the empty set (as in the lecture notes). Define the set-function $\pi : \mathcal{I} \to [0, \infty]$ by
    \[
    \pi(A) :=
    \begin{cases}
        0 & \text{if } A = \emptyset; \\
        \infty & \text{if } A \neq \emptyset.
    \end{cases}
    \]
    Show that $\pi$ has more than one extension to a measure on $\mathcal{B} = \sigma(\mathcal{I})$. What condition of the (Uniqueness theorem) failed here?
\end{exercise}
\begin{proof}
The counting measure and $\mu:\mathcal{B}\to[0,\infty]$ given by $\mu(A) :=
    \begin{cases}
        0 & \text{if } A = \emptyset; \\
        \infty & \text{if } A \neq \emptyset.
    \end{cases}$ are both extensions of $\pi$ to a measure on $\mathcal{B}$. The uniqueness theorem failed because $\pi$ is not $\sigma$-finite.
\end{proof}
\begin{exercise}
Show that $\lambda_1$ has the scaling property: for any real number $c \neq 0$ and any Borel set $B \in \mathcal{B}$, we have $\lambda_1(cB) = |c| \lambda_1(B)$. Here $cB$ is defined to be the set $\{cx : x \in B\}$.
\end{exercise}
\begin{proof}
Let $(a,b]\in I$ be a half-open interval so that $\lambda_1((a,b])=b-a$. Let $c>0$. Then $c(a,b]=(ca,cb]$ so \[\lambda_1(c(a,b])=cb-ca=|c|\lambda_1((a,b]).\] Now let $c<0$. Then $c(a,b]=[cb,ca)$ so \[\lambda_1(c(a,b])=cb-ca=-c(a-b)=|c|\lambda_1((a,b]).\] The result then obviously holds for unbounded intervals. Now let $B$ be any Borel set. Given any $\epsilon>0$ there exists a countable collection $I_1,I_2,...$ of half-open intervals such that $B\subseteq\bigcup_{n=1}^\infty I_n$ and $\sum_{n=1}^\infty\lambda_1(I_n)<\epsilon+\lambda_1(B)$. We then have $cB\subseteq c\bigcup_{n=1}^\infty I_n=\bigcup_{n=1}^\infty cI_n$ and hence \[\lambda_1(cB)\leq\sum_{n=1}^\infty\lambda_1(cI_n)=\sum_{n=1}^\infty|c|\lambda_1(I_n)=|c|\sum_{n=1}^\infty\lambda_1(I_n)\leq|c|(\epsilon+\lambda_1(B)).\] $\epsilon$ is arbitrary so $\lambda_1(cB)\leq|c|\lambda_1(B)$. We then also have $\lambda_1(B)=\lambda_1(\frac{1}{c}cB)\leq|\frac{1}{c}|\lambda_1(cB)$ and hence $|c|\lambda_1(B)\leq\lambda_1(cB)$. Thus $\lambda_1(cB)=|c|\lambda_1(B)$.
\end{proof}
\begin{exercise} 
    Suppose $\mu$ is a translation-invariant measure on $(\mathbb{R}, \mathcal{B})$. Set $\gamma := \mu((0, 1])$ and assume $0 < \gamma < \infty$.
    \begin{enumerate}
        \item[(a)] Show that $\mu((0, 1/n)) = \gamma / n$ for all $n \in \mathbb{N}$.
        \item[(b)] Show that $\mu((0, q]) = \gamma q$ for all rational $q > 0$.
        \item[(c)] Let $\mathcal{I}'$ be the class of half-open intervals in $\mathbb{R}$ with rational endpoints, i.e., the class of intervals of the form $(q, r]$ with $q \in \mathbb{Q}, r \in \mathbb{Q}$, and $q < r$. Show that $\mu(I) = \gamma \lambda_1(I)$ for all $I \in \mathcal{I}'$.
        \item[(d)] Show that $\sigma(\mathcal{I}') = \mathcal{B}$. You may use without proof the fact that $\mathbb{Q}$ is dense in $\mathbb{R}$, that is, every non-empty open interval in $\mathbb{R}$ contains at least one rational number.
        \item[(e)] Use the Uniqueness Lemma to show that $\mu(B) = \gamma \lambda_1(B)$ for all $B \in \mathcal{B}$.
    \end{enumerate}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item[(a)] $(0,1]=\bigcup_{i=1}^n(\frac{i-1}{n},\frac{i}{n}]$ (pairwise disjoint) so $\gamma=\sum_{i=1}^n\mu((\frac{i-1}{n},\frac{i}{n}])=\sum_{i=1}^n\mu((0,\frac{1}{n}])$ by translation invariance and hence $\mu((0,\frac{1}{n}])=\gamma/n$.
    \item[(b)] Write $q$ as $a/b$ for $a,b\in\mathbb{N}$. Then $(0,q]=\bigcup_{i=1}^a(\frac{i-1}{b},\frac{i}{b}]$ (pairwise disjoint) so \[\mu((0,q])=\sum_{i=1}^a\mu((\frac{i-1}{b},\frac{i}{b}])=\sum_{i=1}^a\mu((0,\frac{1}{b}])=\frac{a}{b}\gamma=q\gamma.\]
    \item[(c)] $(q,r]=(0,r]\setminus(0,q]$ so $\mu((q,r])=\mu((0,r])-\mu((0,q])=\gamma r-\gamma q=\gamma\lambda_1((q,r])$.
\item[(d)] We need to show that $\mathcal{I}\subseteq\sigma(\mathcal{I}')$ since then $\mathcal{B}=\sigma(\mathcal{I})\subseteq\sigma(\mathcal{I}')$ so $\sigma(\mathcal{I}')=\mathcal{B}$. Let $(a,b]\in\mathcal{I}$. By the density of $\mathbb{Q}$ in $\mathbb{R}$ there exist sequences $(x_n)_{n\in\mathbb{N}},(y_n)_{n\in\mathbb{N}}\in\mathbb{Q}$ such that $x_n$ is increasing with $\lim_{n\to\infty}x_n=a$ and $y_n$ is decreasing with $\lim_{n\to\infty}y_n=b$. Let $A:=\bigcap_{n=1}^\infty(x_n,y_n]\in\sigma(\mathcal{I}')$. Clearly $(a,b]\subseteq A$. Let $\alpha\leq a$. Then $\exists N$ such that $x_N\geq\alpha$ so $\alpha\not\in A$. let $\beta>b$. Then $\exists K$ such that $y_K<\beta$ so $\beta\not\in A$. Thus $A=(a,b]$ as required.
\item[(e)] $\mathcal{I}'$ is a $\pi$-system in $\mathbb{R}$ and $\gamma\lambda_1$ is a measure on $(\mathbb{R},\mathcal{B})$ which is $\sigma$-finite on $\mathcal{I}'$. $\mu$ is also a measure on $(\mathbb{R},\mathcal{B})$ and agrees with $\gamma\lambda_1$ on $\mathcal{I}'$ so by the uniqueness lemma $\mu(B)=\gamma\lambda_1(B)\forall B\in\mathcal{B}$.
\end{enumerate}
\end{proof}
\begin{exercise}
    Suppose $X$ is a non-empty set and $\mathcal{S}$ is a semi-algebra in $X$. As in Chapter 6 of the notes, let $\mathcal{U}$ be the class of sets of the form $\bigcup_{i=1}^k A_i$ with $k \in \mathbb{N}$ and $A_1, \dots, A_k$ pairwise disjoint sets in $\mathcal{S}$.
    \begin{enumerate}
        \item[(a)] Show by induction on $k$ that if $A \in \mathcal{U}$ then $A^c \in \mathcal{U}$, i.e., $\mathcal{U}$ is closed under complementation.
        \item[(b)] Show also that $\mathcal{U}$ is closed under pairwise intersections and deduce that $\mathcal{U}$ is an algebra.
        \item[(c)] Deduce that $\mathcal{U}$ is the algebra generated by $\mathcal{S}$. (Generated algebras are defined analogously to generated $\sigma$-algebras. Write $\mathcal{A}(\mathcal{S})$ for the algebra generated by $\mathcal{S}$.)
    \end{enumerate}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item[(a)] For $k=1$: $A_1^c$ is a finite union of disjoint sets in $\mathcal{S}$ so $A_1^c\in\mathcal{U}$. Assume true for $k=n$. For $k=n+1$, \[(\bigcup_{i=1}^{n+1}A_i)^c=((\bigcup_{i=1}^{n}A_i)^c)\cap A_{n+1}^c.\] We have $A_{n+1}^c=\bigcup_{i=1}^b D_i$ for some pairwise disjoint $D_i\in\mathcal{S}$, and by the inductive hypothesis we have $(\bigcup_{i=1}^{n}A_i)^c=\bigcup_{i=1}^a C_i$ for some pairwise disjoint $C_i\in\mathcal{S}$. \begin{align*}(\bigcup_{i=1}^a C_i)\cap(\bigcup_{i=1}^b D_i)&=\bigcup_{i=1}^a(C_i\cap(\bigcup_{j=1}^b D_j))\\&=\bigcup_{i=1}^a\bigcup_{j=1}^b(C_i\cap D_j)\\&=\bigcup_{(i,j),1\leq i\leq a,1\leq j\leq b}(C_i\cap D_j).\end{align*} Each $C_i\cap D_j\in\mathcal{S}$ since $\mathcal{S}$ is a $\pi$-system. Furthermore, given $C_i\cap D_j$ and $C_x\cap D_y$ where $i\neq x$ (without loss of generality), then $C_i\cap C_x=\emptyset$ so $(C_i\cap D_j)\cap(C_x\cap D_y)=\emptyset$. Thus $(\bigcup_{i=1}^{n+1}A_i)^c\in\mathcal{U}$ so by induction $\mathcal{U}$ is closed under complementation.
    \item[(b)] Closure under pairwise intersections was proven in part (a). $\emptyset\in\mathcal{S}$ so $\emptyset\in\mathcal{U}$. $\mathcal{U}$ is also closed under complements. Let $A,B\in\mathcal{U}$. Then $A^c,B^c\in\mathcal{U}$ so $A\cup B=(A^c\cap B^c)^c\in\mathcal{U}$. Thus $\mathcal{U}$ is an algebra.
    \item[(c)] $\mathcal{U}\subseteq\mathcal{A}(\mathcal{S})$ since algebras are closed under finite unions. Since $\mathcal{U}$ is also an algebra it follows that $\mathcal{U}=\mathcal{A}(\mathcal{S})$.
\end{enumerate}
\end{proof}
\begin{exercise}
    Suppose $X$ is a non-empty set, $\mathcal{S}$ is a semi-algebra in $X$, and $\pi$ is a pre-measure on $(X, \mathcal{S})$.
    \begin{enumerate}
        \item[(a)] Show that if $A, A_1, \dots, A_k \in \mathcal{S}$ with $A_1, \dots, A_k$ pairwise disjoint and $\bigcup_{i=1}^k A_i \subseteq A$, then $\sum_{i=1}^k \pi(A_i) \leq \pi(A)$.
        \item[(b)] Show that $\pi$ is countably additive, i.e., $\pi(\bigcup_{n=1}^\infty A_n) = \sum_{n=1}^\infty \pi(A_n)$ whenever $A_1, A_2, \dots \in \mathcal{S}$ are pairwise disjoint with $\bigcup_{n=1}^\infty A_n \in \mathcal{S}$.
        \item[] \textit{Hint: The result from Question 23 might be useful.}
    \end{enumerate}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item[(a)] We have $\sum_{i=1}^k\pi(A_i)=\pi(\bigcup_{i=1}^k A_i)$. Let $B_1=A$ and $B_i=\emptyset\forall i>1$. $\bigcup_{i=1}^k A_i\subseteq\bigcup_{i=1}^\infty B_i$ so by countable sub-additivity $\sum_{i=1}^k\pi(A_i)=\pi(\bigcup_{i=1}^k A_i)\leq\sum_{i=1}^\infty\pi(B_i)=\pi(A)$.
    \item[(b)] By countable sub-additivity we have $\pi(\bigcup_{n=1}^\infty A_n)\leq \sum_{n=1}^\infty\pi(A_n)$. Also, $\forall N\in\mathbb{N}$ we have $\sum_{n=1}^N\pi(A_n)\leq\pi(\bigcup_{n=1}^\infty A_n)$ so $\sum_{n=1}^\infty\pi(A_n)=\lim_{N\to\infty}\sum_{n=1}^N\pi(A_n)\leq\pi(\bigcup_{n=1}^\infty)$. Thus $\pi(\bigcup_{n=1}^\infty A_n)=\sum_{n=1}^\infty\pi(A_n)$.
\end{enumerate}
\end{proof}
\begin{exercise}
    Let $F : (-\infty, \infty) \to \mathbb{R}$ be a non-decreasing, right-continuous function (right continuity is defined in Question 10).

    Let $\mathcal{I}$ denote the set of bounded half-open intervals in $\mathbb{R}$ (as in lectures). For $I \in \mathcal{I}$, put
    \[
    \lambda_F(I) = F(b) - F(a), \quad \text{where } I = (a, b], \quad \text{and } \lambda_F(\emptyset) = 0.
    \]
    \begin{enumerate}
        \item[(a)] Check that $\lambda_F(I) \geq 0$ for all $I \in \mathcal{I}$.
        \item[(b)] Show that the set function $\lambda_F$ is finitely sub-additive on $\mathcal{I}$, the class of bounded half-open intervals in $\mathbb{R}$. That is, show that if $A, A_1, A_2, \dots, A_n \in \mathcal{I}$ with $A \subseteq \bigcup_{i=1}^n A_i$, then $\lambda_F(A) \leq \sum_{i=1}^n \lambda_F(A_i)$.
        \item[(c)] Show that $\lambda_F$ is finitely additive on $\mathcal{I}$. That is, show that if $A_1, A_2, \dots, A_n \in \mathcal{I}$ are pairwise disjoint with $A = \bigcup_{i=1}^n A_i \in \mathcal{I}$, then $\lambda_F(A) = \sum_{i=1}^n \lambda_F(A_i)$.
        \item[(d)] Show that $\lambda_F$ is countably sub-additive on $\mathcal{I}$. That is, show that if $A, A_1, A_2, \dots \in \mathcal{I}$ with $A \subseteq \bigcup_{i=1}^\infty A_i$, then $\lambda_F(A) \leq \sum_{i=1}^\infty \lambda_F(A_i)$.
    \end{enumerate}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item[(a)] Let $I=(a,b]$ for $b>a$. $F$ is non-decreasing so $F(b)\geq F(a)$ and so $\lambda_F(I)=F(b)-F(a)\geq0$.
    \item[(b)] We induct on $n$. For $n=1$, $\lambda_F(A)\leq\lambda_F(A_1)$. Assume true for $n=k$. Then for $n=k+1$, write $A$ as $(a,b]$ and $A_i$ as $(a_i,b_i]$. Without loss of generality, let $b_1\leq b_2\leq...\leq b_n$. Further, assume that $A_{k+1}\cap A\neq\emptyset$, since otherwise $A\subseteq\bigcup_{i=1}^k A_i$ so by the inductive hypothersis \[\lambda_F(A)\leq\sum_{i=1}^k\lambda_F(A_i)\leq\sum_{i=1}^{k+1}\lambda_F(A_i).\] $A\subseteq\bigcup_{i=1}^n A_i$ so $b_n\geq b$. Furthermore, $a_n\leq b$ since $A_n\cap A\neq\emptyset$. If $a_n\leq a$ then $\lambda_F(A)\leq\lambda_F(A_n)$ so the result holds. If instead $a_n\in(a,b)$ then $(a,a_n]\subseteq\bigcup_{i=1}^k A_i$. Then by the inductive hypothesis \begin{align*}\lambda_F(A)&=(F(b)-F(a_n))+(F(a_n)-F(a))\\&=\lambda_F((a_n,b])+\lambda_F((a,a_n])\\&\leq\lambda_F(A_n)+\sum_{i=1}^k\lambda_F(A_i)=\sum_{i=1}^n\lambda_F(A_i).\end{align*}
    \item[(c)] We induct on $n$. For $n=1$ it's immediate. Assume true for $n=k$. For $n=k+1$, again assume without loss of generality that $b_1\leq b_2\leq...\leq b_n$. We have $b_n=b$ and $a_n\geq a$ so $(a,a_n]=\bigcup_{i=1}^kA_i$. Thus the inductive hypothesis gives \begin{align*}\lambda_F(A)&=(F(b)-F(a_n))+(F(a_n)-F(a))\\&=\lambda_F((a_n,b])+\lambda_F((a,a_n])\\&=\lambda_F(A_n)+\sum_{i=1}^k\lambda_F(A_i)=\sum_{i=1}^n\lambda_F(A_i).\end{align*}
    \item[(d)] Let $\epsilon>0$. By right-continuity there exists $a'\in(a,b)$ such that $F(a')<F(a)+\epsilon$ and $b_i'>b_i$ such that $F(b_i')<F(b_i)+2^{-i}\epsilon$.
    \[[a',b]\subseteq(a,b]\subseteq\bigcup_{i=1}^\infty(a_i,b_i]\subseteq\bigcup_{i=1}^\infty(a_i,b_i')\] so by compactness $\exists N\in\mathbb{N}$ such that \[(a',b]\subseteq[a',b]\subseteq\bigcup_{i=1}^N(a_i,b_i')\subseteq\bigcup_{i=1}^N(a_i,b_i'].\] Thus \[\lambda_F((a',b])\leq\sum_{i=1}^N\lambda_F((a_i,b_i'])\leq\sum_{i=1}^\infty\lambda_F((a_i,b_i']).\] \[\lambda_F((a_i,b_i'])=F(b_i')-F(b_i)+F(b_i)-F(a_i)<\lambda_F(A_i)+2^{-i}\epsilon\] so \[\lambda_F((a',b])\leq\sum_{i=1}^\infty\lambda_F(A_i)+\sum_{i=1}^\infty2^{-i}\epsilon=\sum_{i=1}^\infty\lambda_F(A_i) + \epsilon.\] \[\lambda_F((a',b])=F(b)-F(a)-(F(a')-F(a))\geq\lambda_F(A)-\epsilon\] so \[\lambda_F(A)-\epsilon\leq\sum_{i=1}^\infty\lambda_F(A_i)+\epsilon\] or \[\lambda_F(A)\leq\sum_{i=1}^\infty\lambda_F(A_i) +2\epsilon.\] $\epsilon$ is arbitrary so \[\lambda_F(A)\leq\sum_{i=1}^\infty\lambda_F(A_i).\]
\end{enumerate}
\end{proof}
\begin{exercise} 
    \begin{enumerate}
        \item[(a)] Show that if $U \subseteq \mathbb{R}^2$ is open and $x \in U$, then we can find a rectangle $R \subseteq \mathbb{R}^2$ with corners having rational coordinates such that $x \in R \subseteq U$. 
        \textit{[We say that a set $A \subseteq \mathbb{R}^2$ is open if for every $x \in A$ there is a disk of positive radius centered on $x$ that is contained in $A$.]}
        \item[(b)] Show that $\sigma(\mathcal{O}_2) = \mathcal{B}_2$, where $\mathcal{O}_2$ is the class of all open sets in $\mathbb{R}^2$, and $\mathcal{B}_2$ is the Borel $\sigma$-algebra in $\mathbb{R}^2$ (see Definition 8.1).
    \end{enumerate}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item[(a)] There exists a disc or radius $r$ centred at $x=(x_1,x_2)$, $B_r(x)$, such that $B_r(x)\subseteq U$. Let $P$ be the square centred at $x$ that is oriented parallel to the $x$ and $y$ axes and with vertices touching $\partial B_r(x)$. Let the vertices of $P$ be given by $(a,b),(a+t,b),(a,b+t),(a+t,b+t)$ where $t>0$. By the density of $\mathbb{Q}$ in $\mathbb{R}$ there exists rational numbers $q,r,v,w$ such that $q\in(a,x_1),r\in(x_1,a+t),v\in(b,x_2),w\in(x_2,b+t)$. Then let $R:=(q,r]\times(v,w]$.
    \item[(b)] Let $U\in\mathcal{O}_2$. Let $S\subseteq\mathcal{R}_2$ be the set of all rectangles with rational coordinates that are contained within $U$. Clearly $\bigcup_{R\in S}R\subseteq U$. Furthermore, $\forall x\in U:\exists R\in S:x\in R$ so $U\subseteq\bigcup_{R\in S}R$ and hence $\bigcup_{R\in S}R=U$. $S$ is in bijection with a subset of $\mathbb{Q}^4$ since each rectangle is determined by four points. $\mathbb{Q}^4$ is countable so $S$ is countable as well. Hence $U$ is a countable union of sets in $\mathcal{R}_2$ so $U\in\sigma(\mathcal{R}_2)$. Thus $\mathcal{O}_2\subseteq\sigma(\mathcal{R}_2)=\mathcal{B}_2$ so $\sigma(\mathcal{O}_2)\subseteq\mathcal{B}_2$. Now let $A:=(a,b]\times(x,y]\in\mathcal{R}_2$. $A=(a,\infty)\times(x,\infty)\setminus((b,\infty)\times(x,\infty)\cup(a, \infty)\times(y,\infty))\in\sigma(\mathcal{O}_2)$ so $\mathcal{R}_2\subseteq\sigma(\mathcal{O}_2)$ and hence $\mathcal{B}_2=\sigma(\mathcal{R}_2)\subseteq\sigma(\mathcal{O}_2)$. Thus $\sigma(\mathcal{O}_2)=\mathcal{B}_2$.
\end{enumerate}
\end{proof}
\begin{exercise}
    Suppose $\rho$ is a rotation on $\mathbb{R}^2$, i.e., pre-multiplication by a $2 \times 2$ matrix $M$ with $M^\top = M^{-1}$ (viewing elements of $\mathbb{R}^2$ as column vectors). Let $\lambda_2$ denote 2-dimensional Lebesgue measure (see Definition 8.10).
    \begin{enumerate}
        \item[(a)] Show that $|\rho(x)| = |x|$ for all $x \in \mathbb{R}^2$, where for $x = (x_1, x_2)^\top \in \mathbb{R}^2$ we put $|x| = \sqrt{x_1^2 + x_2^2}$.
        \item[(b)] Show that $\rho(A) \in \mathcal{B}_2$ for all $A \in \mathcal{B}_2$.
        \item[(c)] Define a measure $\mu$ on $\mathcal{B}_2$ by $\mu(A) = \lambda_2(\rho(A))$ for all $A \in \mathcal{B}_2$. Show that $\mu$ is translation invariant, i.e., $\mu(A + x) = \mu(A)$ for all $A \in \mathcal{B}_2$ and all $x \in \mathbb{R}^2$.
        \item[(d)] Show that the measure $\lambda_2$ is rotation invariant, i.e., $\lambda_2(\rho(A)) = \lambda_2(A)$ for all Borel $A \subseteq \mathbb{R}^2$ (and for any rotation $\rho$).
        \textit{You may use without proof the fact that every translation-invariant measure $\nu$ on $(\mathbb{R}^2, \mathcal{B}_2)$ is of the form $\nu = c \times \lambda_2$ for some constant $c$.}
    \end{enumerate}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item[(a)] $|\rho(x)|=\sqrt{\rho(x)\cdot\rho(x)}=\sqrt{(Mx)^T(Mx)}=\sqrt{x^TM^TMx}=\sqrt{x^Tx}=\sqrt{x\cdot x}=|x|$.
    \item[(b)] Let $\mathcal{M}$ be the set of $A\subseteq\mathbb{R}^2$ such that $\rho(A)\in\mathcal{B}_2$. Let $U\in\mathcal{O}_2$. Then $\rho(U)\in\mathcal{O}_2\subseteq\mathcal{B}_2$ so $\mathcal{O}_2\subseteq\mathcal{M}$. $\emptyset\in\mathcal{M}$ since $\rho(\emptyset)=\emptyset\in\mathcal{B}_2$. If $A\in\mathcal{M}$ then $\rho(A^c)=\rho(A)^c\in\mathcal{B}_2$ so $\mathcal{M}$ is closed under complements. If $A_1,A_2,...\in\mathcal{M}$ then $\rho(\bigcup_{i=1}^\infty A_i)=\bigcup_{i=1}^\infty\rho(A_i)\in\mathcal{B}_2$ so $\mathcal{M}$ is closed under countable unions. Thus $\mathcal{M}$ is a $\sigma$-algebra and so $\mathcal{B}_2=\sigma(\mathcal{O}_2)\subseteq\mathcal{M}$. Thus $\rho(A)\in\mathcal{B}_2\forall A\in\mathcal{B}_2$.
    \item[(c)] Let $x\in\mathbb{R}^2$ and let $A\in\mathcal{B}_2$. Assume that $\mu(A)<\infty$. Let $\epsilon>0$. There exist $R_1,R_2,...\in\mathcal{R}_2$ such that $A\subseteq\bigcup_{i=1}^\infty R_i$ and $\sum_{i=1}^\infty\mu(R_i)<\mu(A)+\epsilon$. Then $\rho(A+x)\subseteq\bigcup_{i=1}^\infty\rho(R_i+x)$

    Define $\nu:\mathcal{B}_2\to[0,\infty]:A\mapsto\lambda_2(\rho(A+x))$. $\nu(\emptyset)=\lambda_2(\rho(\emptyset))=\lambda_2(\emptyset)=0$. Let $A_1,A_2,...\in\mathcal{B}_2$ be disjoint. Then \begin{align*}      
    \nu(\bigcup_{i=1}^\infty A_i)&=\lambda_2(\rho((\bigcup_{i=1}^\infty A_i) +x))\\&=\lambda_2(\rho(\bigcup_{i=1}^\infty(A_i+x)))\\&=\lambda_2(\bigcup_{i=1}^\infty\rho(A_i+x))\\&=\sum_{i=1}^\infty\lambda_2(\rho(A_i+x))\\&=\sum_{i=1}^\infty\nu(A_i).
    \end{align*} Thus $\nu$ is a measure. Let $R:=(a,b]\times(x,y]\in\mathcal{R}_2$. Then $\nu(R)=\lambda_2(\rho(R+x))=\lambda_2(\rho(R)+\rho(x))=\lambda_2(\rho(R))=\mu(R)$ since $\lambda_2$ is translation invariant. $\mathcal{R}_2$ is a $\pi$-system, $\sigma(\mathcal{R}_2)=\mathcal{B}_2$ and $\mu$ is $\sigma$-finite on $\mathcal{R}_2$ so by the uniqueness lemma $\nu$ agrees with $\mu$ on $\mathcal{B}_2$.
    \item[(d)] Define $\mu:\mathcal{B}_2\to[0,\infty]:A\mapsto\lambda_2(\rho(A))$. Given $x\in\mathbb{R}^2,A\in\mathcal{B}_2$, $\mu(A+x)=\lambda_2(\rho(A+x))=\lambda_2(\rho(A)+\rho(x))=\lambda_2(\rho(A))=\mu(A)$ so $\mu$ is translation-invariant and thus of the form $c\times\lambda_2$ for some $c\in\mathbb{R}$. Let $A:=B_1((0,0))$. Then $\rho(A)=A$ so $\mu(A)=c\lambda_2(A)=\lambda_2(A)$ and hence $c=1$ so $\lambda_2$ is rotation-invariant.
\end{enumerate}
\end{proof}
\begin{exercise} 
    \begin{enumerate}
        \item[(a)] Show that $\lambda_2(L) = 0$ for any line segment $L \subseteq \mathbb{R}^2$. \textit{[You may use the result from Question 27 without proof.]} 
        \item[(b)] Let $r > 0$ and set $D := \{x \in \mathbb{R}^2 : |x| < r\}$, the open disk of radius $r$ in $\mathbb{R}^2$ centered on the origin (we define $|x|$ as in the previous question). By approximating $D$ by an increasing sequence of regular polygons contained in $D$, show that $\lambda_2(D) = \pi r^2$. 
        \textit{You may use without proof the ‘half base times height’ formula for the Lebesgue measure (area) of a triangle. You may also use without proof the fact that $(\sin x)/x \to 1$ as $x \to 0$.}
    \end{enumerate}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item[(a)] Suppose that $\lambda_2(L)>0$. Since $\lambda_2$ is translation-invariant, assume without loss of generality that an end-point of $L$ is $(0,0)$. Let $R$ be the length of $L$. Let $\rho_n$ be a rotation of $\frac{2\pi}{n}$ radians and let $A:=\bigcup_{n=1}^\infty\rho_n(L)$. $A\subseteq \overline{B_R((0,0))}$ so $\lambda_2(A)=\sum_{n=1}^\infty\lambda_2(\rho_n(L))=\sum_{n=1}^\infty\lambda_2(L)=\infty\leq\lambda_2(\overline{B_R((0,0))})<\infty$; a contradiction. Thus $\lambda_2(L)=0$.
    \item[(b)] Let $A_i$ be the interior of a regular $3\cdot2^i$-sided polygon centred at the origin with a vertex at $(r,0)$. $\lambda_2(A_i)=3\cdot2^i\frac{r^2\sin(\frac{2\pi}{3\cdot2^i})}{2}$. Furthermore, $A_i\subseteq A_{i+1}\forall i$ and $\bigcup_{i=1}^\infty A_i=D$ so by upward continuity \begin{align*}\lambda_2(D)&=\lim_{i\to\infty}\frac{3\cdot2^i}{2}r^2\sin(\frac{2\pi}{3\cdot2^i})\\&=\frac{r^2}{2}\lim_{i\to\infty}i\sin(\frac{2\pi}{i})\\&=\frac{r^2}{2}\lim_{n\to0^+}\frac{\sin(2\pi n)}{n}\\&=\frac{2\pi r^2}{2}\lim_{n\to0^+}\frac{\sin(2\pi n)}{2\pi n}\\&=\pi r^2.\end{align*}
\end{enumerate}
\end{proof}
\begin{exercise}
    Suppose $F$ is a function with the properties assumed in Exercise 25.
    \begin{enumerate}
        \item[(a)] Prove that there is a unique measure $\mu_F$ on $(\mathbb{R}, \mathcal{B})$ with the property that $\mu_F((a, b]) = F(b) - F(a)$ for all $a, b \in \mathbb{R}$ with $a < b$. \textit{[You may assume without proof Carathéodory’s extension theorem, along with the results of Exercise 25.]} 
        \item[(b)] Given $y \in \mathbb{R}$, show that the $\mu_F$-measure of the one-point set $\{y\}$ is $\mu_F(\{y\}) = F(y) - F(y^-)$, where $F(y^-) = \lim_{x \to y^-} F(x)$.
        \item[(c)] Show that $\mu_F([a, b]) = F(b) - F(a^-)$, and also find the formulas for $\mu_F((a, b))$ and $\mu_F([a, b))$, when $-\infty < a < b < \infty$.
    \end{enumerate}
    \textit{Remark: The measure $\mu_F$ is called the Lebesgue-Stieltjes measure corresponding to the function $F$.}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item[(a)] $\lambda_F$ as defined in question $25$ is a $\sigma$-finite pre-measure on $\overline{\mathcal{I}}$ with the property that  $\lambda_F((a,b])=F(b)-F(a)$. Thus by the Caratheodory extension theorem there exists a unique measure $\mu_F$ on $(\mathbb{B},\mathcal{B})$ which agrees with $\lambda_F$ on $\mathcal{I}$.
    \item[(b)] Let $A_n:=(y-\frac{1}{n},y]$. Then $A_{n+1}\subseteq A_n\forall n$, $\bigcap_{n=1}^\infty A_n=\{y\}$ and $\mu_F(A_1)<\infty$ so by downwards continuity $\mu_F(\{y\})=\lim_{n\to\infty}\mu_F(A_n)=\lim_{n\to\infty}(F(y)-F(y-\frac{1}{n}))=F(y)-F(y^-)$.
    \item[(c)] Let $A_n:=(a-\frac{1}{n},b]$. Then as before $\mu_F([a,b])=\lim_{n\to\infty}(F(b)-F(a-\frac{1}{n}))=F(b)-F(a^-)$. Then \begin{align*}\mu_F((a,b))&=\mu_F([a,b])-\mu_F(\{a\})-\mu_F(\{b\})\\&=F(b)-F(a^-)-F(b)+F(b^-)-F(a)+F(a^-)\\&=F(b^-)-F(a).\end{align*} and \begin{align*}
        \mu_F([a,b))&=\mu_F([a,b])-\mu_F(\{b\})\\&=F(b)-F(a^-)-F(b)+F(b^-)\\&=F(b^-)-F(a^-).
    \end{align*}
\end{enumerate}
\end{proof}
\begin{exercise}
    Prove that if $W \subseteq \mathbb{R}$ is a Borel set, and $f : W \to \mathbb{R}$ is an increasing function (i.e., $f(x) \leq f(y)$ whenever $x, y \in W$ with $x < y$), then $f$ is Borel measurable.
\end{exercise}
\begin{proof}
    Let $\alpha\in\mathbb{R}$ and let $t=\text{inf}(f^{-1}((\alpha,\infty]))$. Then $f^{-1}((\alpha,\infty])=W\cap (t,\infty)$ or  $f^{-1}((\alpha,\infty])=W\cap [t,\infty)$ (since the infimum of a set may or may not be contained in the set). The intersection of Borel sets is Borel and $W\cap (t,\infty),W\cap [t,\infty)\subseteq W$ so $f^{-1}((\alpha,\infty])\in\mathcal{B}_W$. Thus $f$ is Borel measurable.
\end{proof}

\begin{exercise}
\begin{enumerate}
\item[(a)] Let \((X, \mathcal{M})\) be a measurable space, and let \( f_n : X \to \mathbb{R} \) be measurable functions. Show that the set of points
    \[
    \{ x \in X : \lim\limits_{n \to \infty} f_n(x) \text{ exists in } \mathbb{R} \}
    \]
    is in \( \mathcal{M} \).
    
\item[(b)] Taking \((\Omega, \mathcal{F}, P)\) to be a probability space, and random variables (i.e., measurable functions) \( Y_1, Y_2, \dots : \Omega \to \mathbb{R} \) show that for any constant \(\mu \in \mathbb{R}\) the set:
    \[
    \left\{ \omega \in \Omega : \lim\limits_{n \to \infty} \frac{1}{n} \sum_{i=1}^{n} Y_i(\omega) = \mu \right\}
    \]
    is in \(\mathcal{F}\). Deduce that expressions like \( \mathbb{P}[\lim\limits_{n \to \infty} \frac{1}{n} \sum_{i=1}^{n} Y_i = \mu] \) are meaningful.
\end{enumerate}
\end{exercise} 
\begin{proof}
\begin{enumerate}
    \item[(a)] Call the set $A$. 
    Define \[B:=\{x\in X:\limsup_{n\to\infty}f_n(x)=-\infty\},\] \[C:=\{x\in X:\liminf_{n\to\infty}f_n(x)=\infty\}\] and \[D:=\{x\in X:\liminf_{n\to\infty}f_n(x)<\limsup_{n\to\infty}f_n(x)\}\] so that $A=(B\cup C\cup D)^c$. \[B=\bigcap_{k=1}^\infty(\limsup_{n\to\infty}f_n)^{-1}((-\infty,-k])\in\mathcal{M}\] and similarly $C\in\mathcal{M}$.\[D=(\liminf_{n\to\infty}f_n-\limsup_{n\to\infty}f_n)^{-1}((-\infty,0))\in\mathcal{M}.\] Thus $A\in\mathcal{M}$.
    \item[(b)] Call the set $A$. Define the measurable function $g_n:\Omega\to\mathbb{R}:\omega\mapsto|\frac{1}{n}\sum_{i=1}^nY_i(\omega)-\mu|$. Then \begin{align*}
        A&=\{\omega\in\Omega:\forall K\in\mathbb{N}:\exists N\in\mathbb{N}:\forall n>N:g_n(\omega)<\frac{1}{K}\}\\&=\{\omega\in\Omega:\forall K\in\mathbb{N}:\exists N\in\mathbb{N}:\forall n>N:\omega\in g_n^{-1}([0,\frac{1}{K}))\}\\&=\bigcap_{K=1}^\infty\bigcup_{N=1}^\infty\bigcap_{n>N}g_n^{-1}([0,\frac{1}{K})])\in\mathcal{F}.
    \end{align*}
\end{enumerate}
\end{proof}
\begin{exercise}
Let \((X, \mathcal{M})\) be a measurable space.
\begin{enumerate}   
\item[(a)] Show that if \( E \in \mathcal{M} \), then its indicator function \( \mathbf{1}_E \) defined by \( \mathbf{1}_E(x) = 1 \) for \( x \in E \) and \( \mathbf{1}_E(x) = 0 \) for \( x \notin E \), is a measurable function.
    
\item[(b)] Let \( f : X \to \mathbb{R} \) be a function with finite range \( f(X) = \{\alpha_1, \dots, \alpha_n\} \) (with \( \alpha_1, \dots, \alpha_n \) distinct), so that \( f = \sum_{i=1}^{n} \alpha_i \mathbf{1}_{A_i} \), where \( A_i = \{ x \in X : f(x) = \alpha_i \} \). Show that \( f \) is measurable if and only if \( A_1, \dots, A_n \in \mathcal{M} \).
\end{enumerate}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item[(a)] Let $\alpha\geq 1$. Then $\mathbf{1}_E^{-1}((\alpha,\infty])=\emptyset\in\mathcal{M}$.

    Now let $0\leq\alpha<1$. Then $\mathbf{1}_E^{-1}((\alpha,\infty])=E\in\mathcal{M}$.

    Now let $\alpha<0$. Then $\mathbf{1}_E^{-1}((\alpha,\infty])=X\in\mathcal{M}$. Thus $\mathbf{1}_E$ is measurable.
    \item[(b)] $(\impliedby)$ If $A_1,...,A_n\in\mathcal{M}$ then $\mathbf{1}_{A_i}$ is measurable $\forall i$ so $f$ is measurable as the sum of measurable functions.

    $(\implies)$ $\{a_i\}$ is a Borel set so $f^{-1}(\{a_i\})=A_i\in\mathcal{M}\forall i$.
\end{enumerate}
\end{proof}
\begin{exercise}
Suppose \((X, \mathcal{M}, \mu)\) is a \(\sigma\)-finite measure space and \( f : X \to [0, \infty] \) is measurable.
\begin{enumerate}   
\item[(a)] Prove that if \( a \in (0, \infty) \) then \( \mu(f^{-1}[a, \infty]) \leq a^{-1} \int f d\mu \). [When \( \mu \) is a probability measure, this is called \textit{Markov's inequality}]
    
\item[(b)] Prove that if \( \int f d\mu = 0 \), then \( \mu(f^{-1}((0, \infty])) = 0 \).
\end{enumerate}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item[(a)] \begin{align*}\mu(f^{-1}([a,\infty]))&=(\mu\otimes\lambda_1)(f^{-1}([a,\infty])\times(0 ,1))\\&=a^{-1}(\mu\otimes\lambda_1)(f^{-1}([a,\infty])\times(0,a))\\&\leq a^{-1}\int_{f^{-1}([a,\infty])}fd\mu\\&\leq a^{-1}\int fd\mu.\end{align*}
    \item[(b)] Define $A_n:=f^{-1}([\frac{1}{n},\infty])$. Then $A_n\subseteq A_{n+1}\forall n$ and $\bigcup_{n=1}^\infty A_n=f^{-1}((0,\infty])$ so by upwards continuity $\mu(f^{-1}((0,\infty]))=\lim_{n\to\infty}\mu(f^{-1}([\frac{1}{n},\infty]))$. $\mu(f^{-1}([\frac{1}{n},\infty]))\leq n\int fd\mu=0\forall n$ so $\mu(f^{-1}((0,\infty]))=0$. 
\end{enumerate}
\end{proof}
\begin{exercise}
Let \((X, \mathcal{M})\) be a measurable space. Suppose \( f : X \to [0, \infty) \) and \( g : X \to [0, \infty) \) are measurable functions. Define the set \( A \subset X \times \mathbb{R} \times \mathbb{R} \) by 
    \[
    A := \{(x, s, t) : f(x) > s, g(x) > t\}.
    \]
    Let \( \mathcal{B} \) denote the Borel \(\sigma\)-algebra in \( \mathbb{R} \). Show that \( A \in \mathcal{M} \otimes \mathcal{B} \otimes \mathcal{B} \), where \( \mathcal{M} \otimes \mathcal{B} \otimes \mathcal{B} \) is the \(\sigma\)-algebra generated by the collection of all sets in \( X \times \mathbb{R} \times \mathbb{R} \) of the form \( B \times C \times D \) with \( B \in \mathcal{M}, C \in \mathcal{B} \) and \( D \in \mathcal{B} \).
\end{exercise}
\begin{proof}
If $s<f(x)$ and $t<g(x)$ then there are rational numbers $q\in(s,f(x))$ and $r\in(t,g(x))$ since $\overline{\mathbb{Q}}=\mathbb{R}$. Thus \begin{align*}
    A&=\bigcup_{(q,r)\in\mathbb{Q}^2}\{(x,s,t)\in X\times\mathbb{R}\times\mathbb{R}:f(x)>q>s,g(x)>r>t\}\\&=\bigcup_{(q,r)\in\mathbb{Q}^2}(\{(x,s,t)\in X\times\mathbb{R}\times\mathbb{R}:f(x)>q>s\}\cap\{(x,s,t)\in X\times\mathbb{R}\times\mathbb{R}:g(x)>r>t\})\\&=\bigcup_{(q,r)\in\mathbb{Q}^2}(f^{-1}((q,\infty))\times(-\infty,q)\times\mathbb{R}\cap g^{-1}((r,\infty))\times\mathbb{R}\times(-\infty,r))\in\mathcal{M}\otimes\mathcal{B}\otimes\mathcal{B}.\end{align*}
\end{proof}
\begin{exercise}
\begin{enumerate}
\item[(a)] Let \((X, \mathcal{M})\) and \((Y, \mathcal{N})\) be measurable spaces. Show that for all \( A \subset X \times Y \) with \( A \in \mathcal{M} \otimes \mathcal{N} \), and all \( y \in Y \), the horizontal cross-section \( A_{[y]} \) of \( A \) defined by
    \[
    A_{[y]} := \{x \in X : (x, y) \in A\}
    \]
    satisfies \( A_{[y]} \in \mathcal{M} \). 
    
    [\textit{Hint: First show the class of \( A \subset X \times Y \) with \( A_{[y]} \in \mathcal{M} \) is a \(\sigma\)-algebra}]
    
\item[(b)] Suppose \( f : X \to [0, \infty] \) is such that \( \text{hyp}(f) \in \mathcal{M} \otimes \mathcal{B} \). Show that \( f \) is a measurable function.
\end{enumerate}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item[(a)] Let $y\in Y$. Let $\mathcal{U}:=\{A\subseteq X\times Y:A_{[y]}\in \mathcal{M}\}$. $\emptyset_{[y]}=\emptyset\in\mathcal{M}$ so $\emptyset\in\mathcal{U}$. Let $B\in\mathcal{U}$. Then \[(B^c)_{[y]}=\{x\in X:(x,y)\in B^c\}=\{x\in X:(x,y)\not\in B\}=(B_{[y]})^c\in\mathcal{M}\] so $\mathcal{U}$ is closed under complements. Now let $A_1,A_2,...\in\mathcal{U}$. Then \[(\bigcup_{i=1}^\infty A_i)_{[y]}=\{x\in X:(x,y)\in\bigcup_{i=1}^\infty A_i\}=\bigcup_{i=1}^\infty\{x\in X:(x,y)\in A_i\}=\bigcup_{i=1}^\infty {A_i}_{[y]}\in\mathcal{M}.\] Thus $\mathcal{U}$ is a $\sigma$-algebra. Let $C:=M\times N\in\mathcal{M}\times\mathcal{N}$. Then \[C_{[y]}=\{x\in X:(x,y)\in M\times N\}=\begin{cases}
        M\text{ if }y\in N,\\
        \emptyset\text{ otherwise}
    \end{cases}\]so $C_{[y]}\in\mathcal{M}$. Thus $\mathcal{M}\times\mathcal{N}\subseteq\mathcal{U}$ so $\mathcal{M}\otimes\mathcal{N}=\sigma(\mathcal{M}\times\mathcal{N})\subseteq \mathcal{U}$. Thus given any $A\in\mathcal{M}\otimes\mathcal{N}$ we have $A_{[y]}\in\mathcal{M}$.
    \item[(b)] Let $\alpha>0$. Then \begin{align*}f^{-1}((\alpha,\infty])&=\{x\in X:\alpha<f(x)\}\\&=\{x\in X:(x,\alpha)\in\text{hyp}(f)\}\\&=\text{hyp}(f)_{[\alpha]}\in\mathcal{M}.\end{align*} If $\alpha<0$, then $f^{-1}((\alpha,\infty])=X\in\mathcal{M}$. Otherwise, $f^{-1}((0,\infty])=\bigcup_{n=1}^\infty f^{-1}((\frac{1}{n},\infty])\in\mathcal{M}$. Thus $f$ is measurable.
\end{enumerate}
\end{proof}
\begin{exercise}
Let \( W \in \mathcal{B} \) (the Borel sets in \( \mathbb{R} \)) with \( W \neq \emptyset \). Recall from Definition 10.3 that \( \mathcal{B}_W := \{ B \subset W : B \in \mathcal{B} \} \).
\begin{enumerate}
\item[(a)] Show that \( \mathcal{B}_W = \{ A \cap W : A \in \mathcal{B} \} \).
    
\item[(b)] Show that \( \mathcal{B}_W \) is the \(\sigma\)-algebra in \( W \) generated by the collection of all sets of the form \( (-\infty, a] \cap W \) with \( a \in \mathbb{R} \).
\end{enumerate}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item[(a)] Let $\mathcal{C}:=\{A\cap W:A\in\mathcal{B}\}$. Let $A\cap W\in\mathcal{C}$. Then $A\cap W\subseteq W$ and $A\cap W\in\mathcal{B}$ so $\mathcal{C}\subseteq\mathcal{B}_W$. Now let $B\in\mathcal{B}_W$. Then $B=B\cap W$ with $B\in\mathcal{B}$ so $\mathcal{B}_W=\mathcal{C}$.
    \item[(b)] Let $\mathcal{D}:=\{(-\infty,a]\cap W:a\in\mathbb{R}\}$. $(-\infty,a]\in\mathcal{B}\forall a\in\mathbb{R}$ so $\mathcal{D}\subseteq\mathcal{B}_W$ and hence $\sigma(\mathcal{D})\subseteq\mathcal{B}_W$. Let $C:=(x,y]\cap W\in\mathcal{B}_W$. Then $C=((-\infty,y]\cap W)\cap((-\infty,x]^c\cap W)\in\sigma(\mathcal{D})$. Thus $\{A\cap W:A\in\mathcal{I}\}\subseteq\sigma(\mathcal{D})$ so $\sigma(\{A\cap W:A\in\mathcal{I}\})=\{A\cap W:A\in\sigma(\mathcal{I})=\mathcal{B}\}\subseteq\sigma(\mathcal{D})$. Thus $\mathcal{B}_W=\sigma(\mathcal{D})$.
\end{enumerate}
\end{proof}
\begin{exercise}
Suppose \( g : \mathbb{R} \to \mathbb{R} \) is integrable (with respect to Lebesgue measure), and let \( t \in \mathbb{R} \).
\begin{enumerate}
\item[(a)] Show that \( \int_{-\infty}^{\infty} g(x - t)dx = \int_{-\infty}^{\infty} g(x)dx \).
    
\item[(b)] Deduce that (with \( g \) as in (a)) for any \( a, b \in \mathbb{R} \) with \( a < b \), \( \int_{a+t}^{b+t} g(x - t)dx = \int_{a}^{b} g(x)dx \).
    
    [\textit{Hint: For part (a), start with the case where \( g \) is nonnegative and simple. Another way to write the result in (a) is \( \int h d\lambda_1 = \int g d\lambda_1 \), where we set \( h(x) = g(x - t) \)}]
\end{enumerate}
\end{exercise}    
\begin{proof}
\begin{enumerate}
    \item[(a)] First let $g$ be non-negative and simple, so that $g=\sum_{i=1}^n\alpha_i\mathbf{1}_{A_i}$ for $\alpha_1,...,\alpha_n\in\mathbb{R}_+$ and $A_1,...,A_n\in\mathcal{B}$ pairwise disjoint. Then $\int_{-\infty}^\infty g(x)dx=\sum_{i=1}^n\alpha_i\lambda_1(A_i)$. Let $h(x):=g(x-t)$. Then $h=\sum_{i=1}^n\alpha_i\mathbf{1}_{t+A_i}$ so \[\int_{-\infty}^\infty g(x-t)dx=\sum_{i=1}^n\alpha_i\lambda_1(t+A_i)=\sum_{i=1}^n\alpha_i\lambda_1(A_i)=\int_{-\infty}^\infty g(x)dx.\] Now let $g$ be non-negative but not necessarily simple. There exist non-negative simple functions $(g_n)_{n\in\mathbb{N}}$ such that $g_n\uparrow g$ and hence also $g_n(x-t)\uparrow g(x-t)$. Then by the monotone convergence theorem, \[\int_{-\infty}^\infty g(x-t)=\lim_{n\to\infty}\int_{-\infty}^\infty g_n(x-t)dx=\lim_{n\to\infty}\int_{-\infty}^\infty g_n(x)dx=\int_{-\infty}^\infty g(x)dx.\]Now let $g$ be any integrable function. Then \[\int_{-\infty}^\infty g(x-t)dx=\int_{-\infty}^\infty g(x-t)^+dx-\int_{-\infty}^\infty g(x-t)^-dx=\int_{-\infty}^\infty g(x)^+dx-\int_{-\infty}^\infty g(x)^-dx=\int_{-\infty}^\infty g(x)dx.\]
    \item[(b)] \[\int_{a+t}^{b+t}g(x-t)dx=\int_{-\infty}^\infty g(x-t)\mathbf{1}_{(a+t,b+t)}(x)dx=\int_{-\infty}^\infty g(x)\mathbf{1}_{(a,b)}(x)dx=\int_a^b g(x)dx.\]
\end{enumerate}
\end{proof}
\begin{exercise}
Let \( \mu \) be counting measure on \( (\mathbb{N}, \mathcal{P}(\mathbb{N})) \).
\begin{enumerate}   
\item[(a)] Let \( k \in \mathbb{N} \). Show that if \( f : \mathbb{N} \to [0, \infty) \) with \( f(n) = 0 \) for all \( n > k \), then \( \int_{\mathbb{N}} f d\mu = \sum_{n=1}^{k} f(n) \).
    
    [\textit{Hint: \( f \) must be simple.}]
    
\item[(b)] Show that if \( g : \mathbb{N} \to [0, \infty) \) then \( \int_{\mathbb{N}} g d\mu = \sum_{n=1}^{\infty} g(n) \).
    
    [\textit{Hint: use the Monotone Convergence theorem.}]
    
\item[(c)] Suppose \( h : \mathbb{N} \to \mathbb{R} \) with \( \sum_{n=1}^{\infty} |h(n)| < \infty \). Show that \( \int_{\mathbb{N}} h d\mu = \sum_{n=1}^{\infty} h(n) \).
\end{enumerate}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item[(a)] $f$ is simple the image of $f$ is a finite set $\{\alpha_1,...,\alpha_m\}$ so $\int_{\mathbb{N}}fd\mu=\sum_{i=1}^m\alpha_i\mu(f^{-1}(\{\alpha_i\}))$. $\mu(f^{-1}(\{\alpha_i\}))=\#\{n\in\mathbb{N}:f(n)=\alpha_i\}$ so \[\alpha_i\mu(f^{-1}(\{\alpha_i\}))=\sum_{n\in f^{-1}(\{\alpha_i\})}f(n).\] The fibres are pairwise disjoint so \[\int_{\mathbb{N}}fd\mu=\sum_{n\in\bigcup_{i=1}^mf^{-1}(\{\alpha_i\})}f(n)=\sum_{n\in\mathbb{N}}f(n)=\sum_{n=1}^kf(n)\] since $f(n)=0\forall n>k$.
    \item[(b)] Define $g_k:\mathbb{N}\to[0,\infty)$ by \[g_k(n)=\begin{cases}
        g(n)\text{ if }n\leq k,\\
        0\text{ otherwise.}
    \end{cases}\] Then $g_k\uparrow g$ so by the monotone convergence theorem \[\int_{\mathbb{N}}gd\mu=\lim_{k\to\infty}\int_{\mathbb{N}}g_kd\mu=\lim_{k\to\infty}\sum_{n=1}^kg(n)=\sum_{n=1}^\infty g(n).\]
    \item[(c)] \begin{align*}\int_{\mathbb{N}}hd\mu&=\int_{\mathbb{N}}h^+-h^-d\mu\\&=\int_{\mathbb{N}}h^+d\mu-\int_{\mathbb{N}}h^-d\mu\\&=\sum_{n=1}^\infty h^+(n)-\sum_{n=1}^\infty h^-(n)\\&=\sum_{n=1}^\infty h^+(n)-h^-(n)\\&=\sum_{n=1}^\infty h(n).\end{align*}
\end{enumerate}
\end{proof}
\begin{exercise}
Let \( (X, \mathcal{M}, \mu) \) be a \(\sigma\)-finite measure space. Suppose \( F_1, \dots, F_n \) are subsets of \( X \) with \( F_i \in \mathcal{M} \) and \( \mu(F_i) < \infty \) for each \( i \in [n] \), where we set \( [n] := \{1, \dots, n\} \). For \( S \in \mathcal{P}([n]) \), i.e. \( S \subset [n] \), let \( |S| \) denote the number of elements of \( S \). Use the linearity of integration, and the fact that \( \mu(A) = \int_X 1_A \) for any \( A \in \mathcal{M} \), to prove the \textit{inclusion-exclusion formula}
    
    \[
    \mu\Big(\bigcup_{i=1}^{n} F_i\Big) = \sum_{J \in \mathcal{P}([n]) \setminus \{\emptyset\}} (-1)^{|J|+1} \mu\Big(\bigcap_{j \in J} F_j\Big).
    \]
    
    [\textit{Hint: for any sets \( G_1, \dots, G_k \in \mathcal{M} \) we have \( 1_{\cap_{i=1}^{k} G_i} = \prod_{i=1}^{k} 1_{G_i} \).}]
\end{exercise}  
\begin{proof}
\[\mu(\bigcup_{i=1}^n F_i)=\int_X \mathbf{1}_{\bigcup_{i=1}^n F_i}d\mu.\] We prove by induction that \[\mathbf{1}_{\bigcup_{i=1}^nF_i}=\sum_{J\in\mathcal{P}([n])\setminus\{\emptyset\}}(-1)^{|J|+1}\mathbf{1}_{\bigcap_{j\in J}F_j}.\] For $n=1$ the statement is trivial. Now assume for $n=k$. Then for $n=k+1$, \begin{align*}\mathbf{1}_{\bigcup_{i=1}^{k+1}F_i}&=\mathbf{1}_{\bigcup_{i=1}^kF_i}+\mathbf{1}_{F_{k+1}}-\mathbf{1}_{\bigcup_{i=1}^k(F_i\cap F_{k+1})}\\&=\mathbf{1}_{F_{k+1}}+\sum_{J\in\mathcal{P}([k])\setminus\{\emptyset\}}(-1)^{|J|+1}\mathbf{1}_{\bigcap_{j\in J}F_j}-\sum_{J\in\mathcal{P}([k])\setminus\{\emptyset\}}(-1)^{|J|+1}\mathbf{1}_{\bigcap_{j\in J}F_j\cap F_{k+1}}\\&=\sum_{J\in\mathcal{P}([k])\setminus\{\emptyset\}}(-1)^{|J|+1}\mathbf{1}_{\bigcap_{j\in J}F_j}+\sum_{J\in\mathcal{P}([k])}(-1)^{|J|+2}\mathbf{1}_{\bigcap_{j\in J}F_j\cap F_{k+1}}\\&=\sum_{J\in\mathcal{P}([k+1])\setminus\{\emptyset\}}(-1)^{|J|+1}\mathbf{1}_{\bigcap_{j\in J}F_j}\end{align*} as required. Thus \begin{align*}
    \mu(\bigcup_{i=1}^nF_i)&=\int_X\mathbf{1}_{\bigcup_{i=1}^nF_i}d\mu\\&=\int_X \sum_{J\in\mathcal{P}([n])\setminus\{\emptyset\}}(-1)^{|J|+1}\mathbf{1}_{\bigcap_{j\in J}F_j}d\mu\\&=\sum_{J\in\mathcal{P}([n])\setminus\{\emptyset \}}(-1)^{|J|+1}\int_X\mathbf{1}_{\bigcap_{j\in J}F_j}d\mu\\&=\sum_{J\in\mathcal{P}([n])\setminus\{\emptyset \}}(-1)^{|J|+1}\mu(\bigcap_{j\in J}F_j).
\end{align*}
\end{proof}
\begin{exercise}
Let \( (X, \mathcal{M}, \mu) \) be a \(\sigma\)-finite measure space. Suppose \( f,g,h \in L^1(\mu) \).
\begin{enumerate}   
\item[(a)] For \( F \in L^1(\mu) \) set \( \|F\|_1 := \int |F| d\mu \). Show that \( \|f + g\|_1 \leq \|f\|_1 + \|g\|_1 \).
    
\item[(b)] Show that \( f - h \in L^1(\mu) \) and \( h - g \in L^1(\mu) \) and \( \|f - g\|_1 \leq \|f - h\|_1 + \|h - g\|_1 \).
\end{enumerate}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item[(a)] \[\|f+g\|_1=\int|f+g|d\mu\leq\int|f|+|g|d\mu=\int|f|d\mu+\int|g|d\mu=\|f\|_1+\|g\|_1.\]
    \item[(b)] \[\int|f-h|d\mu\leq\int|f|+|h|d\mu=\|f\|_1+\|h\|_1<\infty\] so $f-h\in L^1(\mu)$. Similarly, $h-g\in L^1(\mu)$.\[\|f-g\|_1=\|(f-h)+(h-g)\|_1\leq\|f-h\|_1+\|h-g\|_1.\]
\end{enumerate}
\end{proof}
\begin{exercise}
A function \( f : \mathbb{R} \to \mathbb{R} \) is said to have \textit{bounded support} if there exists \( n \in \mathbb{N} \) such that \( f(x) = 0 \) whenever \( |x| > n \).
    
    Suppose \( f : \mathbb{R} \to \mathbb{R} \) is integrable (with respect to Lebesgue measure). Let \( \varepsilon > 0 \). Show that there exists integrable \( g : \mathbb{R} \to \mathbb{R} \) such that \( \int_{-\infty}^{\infty} |f(x) - g(x)|dx < \varepsilon \), and \( g \) has bounded support.
\end{exercise}
\begin{proof}
Define $f_n:=|f|\mathbf{1}_{(-n,n)}$. Then $f_n\uparrow |f|$ so by the monotone convergence theorem \[\lim_{n\to\infty}\int_{-\infty}^\infty f_n(x)dx=\int_{-\infty}^\infty |f(x)|dx\] so $\exists N\in\mathbb{N}$ such that \[|\int_{-\infty}^\infty|f(x)|dx-\int_{-\infty}^\infty f_N(x)dx|=\int_{-\infty}^\infty |f(x)|-f_N(x)dx=\int_{-\infty}^{-N}|f(x)|dx+\int_{N}^\infty|f(x)|dx<\epsilon.\] Let $g:=f\mathbf{1}_{(-N,N)}$. Then \begin{align*}\int_{-\infty}^\infty|f(x)-g(x)|dx&=\int_{-\infty}^\infty|f(x)-f(x)\mathbf{1}_{(-N,N)}(x)|dx\\&=\int_{-\infty}^{-N}|f(x)|dx+\int_{N}^\infty|f(x)|dx\\&<\epsilon.\end{align*}
\end{proof}
\begin{exercise}
A function \( g : \mathbb{R} \to \mathbb{R} \) is called a \textbf{step function} if we can write 
\[
g = \sum_{i=1}^{k} c_i 1_{I_i}
\]
for some \( k \in \mathbb{N} \), \( (c_1, \dots, c_k) \in \mathbb{R}^k \) and \( I_1, \dots, I_k \) intervals in \( \mathbb{R} \).

\smallskip
Suppose \( f : \mathbb{R} \to [0, \infty) \) is simple and has bounded support (i.e., there exists \( n \in \mathbb{N} \) with \( f(x) = 0 \) whenever \( |x| > n \)). Let \( \varepsilon > 0 \). Show that there exists a step function \( g : \mathbb{R} \to \mathbb{R} \) such that 
\[
\int_{-\infty}^{\infty} |g - f| \,dx < \varepsilon.
\]
\textit{Hint: Recall Questions 17 and 23.}
\end{exercise}
\begin{proof}
Let $\text{Im}(f)\setminus\{0\}=\{a_1,...,a_n\}$ and let $A_i:=f^{-1}(\{a_i\})$. For each $i$, since $A_i$ is a bounded Borel set, by exercise $17$ there exists a finite union of half-open intervals $U_i$ such that $\lambda_1(A_i\Delta U)<\frac{\epsilon}{|a_i|n}$, meaning that \[\int|\mathbf{1}_{U_i}-\mathbf{1}_{A_i}|d\lambda_1=\int\mathbf{1}_{U_i\Delta A_i}d\lambda_1<\frac{\epsilon}{|a_i|n}.\] Then setting $g:=\sum_{i=1}^na_i\mathbf{1}_{U_i}$ we have\begin{align*}\int_{-\infty}^\infty|g-f|dx&=\int|\sum_{i=1}^na_i\mathbf{1}_{U_i}-\sum_{i=1}^na_i\mathbf{1}_{A_i}|d\lambda_1\\&=\int|\sum_{i=1}^na_i(\mathbf{1}_{U_i}-\mathbf{1}_{A_i})|d\lambda_1\\&\leq\int\sum_{i=1}^n|a_i(\mathbf{1}_{U_i}-\mathbf{1}_{A_i})|d\lambda_1\\&=\sum_{i=1}^n\int|a_i(\mathbf{1}_{U_i}-\mathbf{1}_{A_i})|d\lambda_1\\&<\sum_{i=1}^n\frac{\epsilon}{n}=\epsilon.\end{align*} Since each $U_i$ is in the algebra generated by $\mathcal{I}$, being a finite union of half-open intervals, we have that $U_i$ is a finite union of pairwise disjoint $I_{i,1},...,I_{i,k_i}\in\mathcal{I}$ and so $a_i\mathbf{1}_{U_i}=\sum_{n=1}^{k_i}a_i\mathbf{1}_{I_{i,n}}\forall i$ and hence $g$ is a step function.
\end{proof}
\begin{exercise}
Suppose \( f : \mathbb{R} \to \mathbb{R} \) is in \( L^1 \). Let \( \varepsilon > 0 \). Using Question 42, show there exists a continuous function \( p : \mathbb{R} \to \mathbb{R} \) such that 
\[
\|f - p\|_1 < \varepsilon,
\]
i.e., 
\[
\int_{-\infty}^{\infty} |f(x) - p(x)| \,dx < \varepsilon.
\]
\end{exercise}
\begin{proof}
Let $\epsilon_1:=\frac{\epsilon}{12}$. First suppose that $f$ is non-negative. There exists an integrable function $g:\mathbb{R}\to\mathbb{R}^+$ with bounded support such that \[\int_{-\infty}^\infty|f(x)-g(x)|dx<\epsilon_1.\] Let $g_n:\mathbb{R}\to\mathbb{R}^+$ be simple approximations of $g$ such that $g_n\uparrow g$, and hence \[\lim_{n\to\infty}\int g_nd\lambda_1=\int gd\lambda_1.\] For every $n$ there exists a step function $h_n:\mathbb{R}\to\mathbb{R}$ such that \[\int|g_n-h_n|d\lambda_1<\epsilon_1.\] There exists an $N\in\mathbb{N}$ such that \[\int g-g_Nd\lambda_1=\int gd\lambda_1-\int g_Nd\lambda_1<\epsilon_1\]and hence\[\int|g-h_N|d\lambda_1\leq\int g-g_Nd\lambda_1+\int|g_N-h_N|<2\epsilon_1.\]Thus \[\int|f-h_N|d\lambda_1\leq\int|f-g|d\lambda_1+\int|g-h_N|d\lambda_1<3\epsilon_1.\]Now let $f$ have negative values. Then $f=f^+-f^-$ with step functions $s^+,s^-:\mathbb{R}\to\mathbb{R}$ such that \[\int|f^+-s^+|d\lambda_1<3\epsilon_1,\int|f^--s^-|d\lambda_1<3\epsilon_1.\]Then \[\int|f-(s^+-s^-)|d\lambda_1=\int|f^+-s^+-f^-+s^-|d\lambda_1\leq\int|f^+-s^+|d\lambda_1+\int|f^--s^-|d\lambda_1<6\epsilon_1=\frac{\epsilon}{2}.\]Then let $s:=s^+-s^-=\sum_{i=0}^na_i\mathbf{1}_{A_i}$ where $a_i\neq a_{i+1}\forall i$ and the $A_i$'s are pairwise disjoint intervals such that \[\bigcup_{i=0}^n A_i=\mathbb{R}.\] Write $A_i$ as $\langle \alpha_i,
\alpha_{i+1}\rangle$ for every $i$ and let $x_i:=\frac{\epsilon}{n|a_i-a_{i-1}|}$. Then define a function $p:\mathbb{R}\to\mathbb{R}$ where $p$ agrees with $s$ on $[\alpha_i+x_i,\alpha_{i+1}-x_{i+1}]\forall i\in\{1,,...,n-1\}$ and on $(-\infty,\alpha_1-x_1]\cup[\alpha_n+x_n,\infty)$ but otherwise forms straight lines from $(\alpha_i-x_i,a_{i-1})$ to $(\alpha_{i}+x_i,a_{i})$ for $i\in\{1,...,n-1\}$. Then \[\int|p-s|d\lambda_1=\sum_{i=1}^{n}\frac{|a_i-a_{i-1}|x_i}{2}=\sum_{i=1}^n\frac{|a_i-a_{i-1}|\epsilon}{2n|a_i-a_{i-1}|}=\frac{\epsilon}{2}.\] Thus \[\| f-p\|_1=\int|f-p|d\lambda_1\leq\int|f-s|d\lambda_1+\int|p-s|d\lambda_1<\epsilon.\]

\end{proof}
\begin{exercise}
Suppose \( (X, \mathcal{M}, \mu) \) is a measure space and \( F_n \subset X \) with \( F_n \in \mathcal{M} \) and \( \mu(F_n) < \infty \), \( \forall n \in \mathbb{N} \). Suppose also that \( \mathcal{D} \subset \mathcal{M} \) is a \(\pi\)-system in \( X \) with \( F_n \in \mathcal{D} \) for all \( n \in \mathbb{N} \), and \( \nu \) is a measure on \( (X, \mathcal{M}) \) such that \( \nu(A) = \mu(A) \) for all \( A \in \mathcal{D} \).
    
    \begin{enumerate}
        \item[(a)] For \( n \in \mathbb{N} \) set \( E_n := \bigcup_{j=1}^{n} F_j \). Use the inclusion-exclusion formula from Question 39 to show for all \( n \in \mathbb{N} \), \( A \in \mathcal{D} \) that
        \[
        \mu(E_n) = \nu(E_n); \quad \mu(A \cap E_n) = \nu(A \cap E_n).
        \]
        \item[(b)] Now suppose moreover that \( \bigcup_{n=1}^{\infty} F_n = X \). Show that \( \mu(A) = \nu(A) \) for all \( A \in \sigma(\mathcal{D}) \).
        
        \textit{This is the Uniqueness lemma (Theorem 5.7). It was proved in the notes under the extra assumption that \( F_n \subset F_{n+1} \) for all \( n \in \mathbb{N} \). You are asked here to prove it without this extra assumption.}
    \end{enumerate}
\end{exercise} 
\begin{proof}
\begin{enumerate}
    \item[(a)] \begin{align*}\mu(E_n)&=\mu(\bigcup_{j=1}^n F_j)\\&=\sum_{J\in\mathcal{P}([n])\setminus\{\emptyset\}}(-1)^{|J|+1}\mu(\bigcap_{j\in J}F_j)\\&=\sum_{J\in\mathcal{P}([n])\setminus\{\emptyset\}}(-1)^{|J|+1}\nu(\bigcap_{j\in J}F_j)\\&=\nu(E_n)\end{align*} since any finite intersection of $F_j$s is contained in $\mathcal{D}$, other which $\mu$ and $\nu$ agree.
    Similarly, \begin{align*}\mu(A\cap E_n)&=\mu(A\cap \bigcup_{j=1}^n F_j)\\&=\mu(\bigcup_{j=1}^n (A\cap F_j))\\&=\sum_{J\in\mathcal{P}([n])\setminus\{\emptyset\}}(-1)^{|J|+1}\mu(\bigcap_{j\in J}(A\cap F_j))\\&=\sum_{J\in\mathcal{P}([n])\setminus\{\emptyset\}}(-1)^{|J|+1}\nu(\bigcap_{j\in J}(A\cap F_j))\\&=\nu(A\cap E_n).\end{align*}
\end{enumerate}
\end{proof}con
\begin{exercise}
Let \( (\Omega, \mathcal{F}, \mu) \) be a probability space. Let \( f : \Omega \to [0, \infty] \) be measurable, i.e. \( f \) is a nonnegative random variable. For \( t \geq 0 \) define \( L(t) := \int_{\Omega} e^{-tf(\omega)}\mu(d\omega) \) (the \textit{Laplace transform} of \( f \)).
    
    \begin{enumerate}
        \item[(a)] Show that \( \lim_{t \to \infty} L(t) = \mu(\{\omega \in \Omega : f(\omega) = 0\}) \). Here we make the convention that \( e^{-\infty} = 0 \).
        \item[(b)] Show that \( \lim_{t \to 0} L(t) = \mu(\{\omega \in \Omega : f(\omega) < \infty\}) \).
        \item[(c)] Show that \( \lim_{t \to 0} t^{-1} (L(0) - L(t)) = \int f d\mu \) if the integral on the right is finite. 
        
        \textit{[Hint: use the fact that \( 1 - e^{-x} \leq x \) for \( x \geq 0 \)]. What can anything if the integral is infinite?}
    \end{enumerate}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item[(a)] Define $g_n:\Omega\to[0,\infty]:\omega\mapsto e^{-nf(\omega)}$ and $g:\Omega\to[0,\infty]:\omega\mapsto e^{-\infty f(\omega)}$. Then $g_n\to g$ pointwise and $|g_n(\omega)|\leq 1\forall\omega\in\Omega$. Hence we can apply the dominated convergence theorem to obtain \[\lim_{t\to\infty}L(t)=\lim_{n\to\infty}\int_{\Omega}g_n(\omega)\mu(d\omega)=\int_{\Omega}g\mu(d\omega).\] If $\omega\in f^{-1}(0)$, then $g(\omega)=e^{-\infty\cdot 0}=1$. Otherwise, $g(\omega)=0$. Thus $g=\mathbf{1}_{f^{-1}\{0\}}$ so \[\lim_{t\to\infty}=\mu(f^{-1}(0))=\mu(\{\omega\in\Omega:f(\omega)=0\}).\]
    \item[(b)] Let $(t_n)_{n\in\mathbb{N}}$ be a sequence such that $t_n\downarrow0$ as $n\to\infty$. Then $L(t_n)=\int_{\omega}e^{-t_nf(\omega)}\mu(d\omega)$. Define $g_n:\Omega\to[0,\infty]:\omega\mapsto e^{-t_nf(\omega)}$ and $g:\Omega\to[0,\infty]:\omega\mapsto\mathbf{1}_{f(\omega)<\infty}$. We then have \[g_n(\omega)=e^{-t_nf(\omega)}\leq e^{-t_{n+1}f(\omega)}=g_{n+1}(\omega)\] and \[\lim_{n\to\infty}g_n(\omega)=\lim_{n\to\infty}e^{-t_nf(\omega)}=e^{0\cdot f(\omega)}=g(\omega)\forall \omega\in \Omega\] so by the monotone convergence theorem we have \[\lim_{n\to\infty}L(t_n)=\int_{\Omega}g\mu(d\omega)=\int_{\Omega}\mathbf{1}_{f(\omega)<\infty}\mu(d\omega)=\mu(\{\omega\in\Omega:f(\omega)<\infty\}).\] Hence \[\lim_{t\to0}L(t)=\mu(\{\omega\in\Omega:f(\omega)<\infty\}).\]
    \item[(c)] First suppose $\int fd\mu$ is finite. Let $(t_n)_{n\in\mathbb{N}}$ be a sequence such that $t_n\downarrow0$ as $n\to\infty$. Then \begin{align*}t_n^{-1}(L(0)-L(t_n))&=t_n^{-1}\int_\Omega \mathbf{1}_{f(\omega)<\infty}-e^{-t_nf(\omega)}\mu(d\omega)\\&=t_n^{-1}\int_{f^{-1}([0,\infty))}1-e^{-t_nf(\omega)}\mu(d\omega)+t_n^{-1}\int_{f^{-1}(\{\infty\})}0\mu(d\omega)\\&=\int_{f^{-1}([0,\infty))}\frac{1-e^{-t_nf(\omega)}}{t_n}\mu(d\omega).\end{align*} We have $1-e^{-t_nf(\omega)}\leq t_nf(\omega)$ so $\frac{1-e^{-t_nf(\omega)}}{t_n}\leq f(\omega)\forall\omega\in f^{-1}([0,\infty))$. Furthermore, \[\lim_{n\to\infty}t_n=\lim_{n\to\infty}1-e^{-t_nf(\omega)}=0\] so by L'hôpital's rule \[\lim_{n\to\infty}\frac{1-e^{-t_nf(\omega)}}{t_n}=\lim_{n\to\infty}\frac{f(\omega)e^{t_nf(\omega)}}{1}=f(\omega)\forall\omega\in f^{-1}([0,\infty)).\] Also \[\frac{1-e^{-t_nf(\omega)}}{t_n}\leq f(\omega)\forall n\in\mathbb{N},\omega\in f^{-1}([0,\infty))\] so by the dominated convergence theorem \[\lim_{t\downarrow0}t^{-1}(L(0)-L(t))=\lim_{n\to\infty}t_n^{-1}(L(0)-L(t_n))=\int_{f^{-1}([0,\infty))}f\mu(d\omega)\]which equals $\int fd\mu$ since $\mu(f^{-1}(\{\infty\}))=0$.
\end{enumerate}
\end{proof}
\begin{exercise}
Let \( (X, \mathcal{M}, \mu) \) be a \(\sigma\)-finite measure space. Show the following:
    
    \begin{enumerate}
        \item[(a)] If \( f : X \to [-\infty, \infty] \) is measurable, \( E \in \mathcal{M} \), \( \int_E |f| d\mu = 0 \), then \( f = 0 \) a.e. on \( E \).
        \item[(b)] If \( f \in L^1(\mu) \) with \( \int_E f d\mu = 0 \) for all \( E \in \mathcal{M} \), then \( f = 0 \) a.e. on \( X \).
        \item[(c)] If \( f \in L^1(\mu) \) with \( |\int_X f d\mu| = \int_X |f| d\mu \), then either \( f \geq 0 \) a.e. on \( X \), or \( f \leq 0 \) a.e. on \( X \).
        \item[(d)] If \( f : X \to \mathbb{R} \) and \( g : X \to \mathbb{R} \) are measurable functions, then \( \{ x \in X : f(x) \neq g(x) \} \in \mathcal{M} \).
    \end{enumerate}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item[(a)] Suppose that $\mu(\{x\in E:f(x)\neq0\})> 0$. Let $A_n:=\{x\in E:|f(x)|>\frac{1}{n}\}$ and let $A:=\{x\in E:|f(x)|>0\}$. Then $A=\bigcup_{n=1}^\infty A_n$. Since $\mu(A)>0$ there exists an $N\in\mathbb{N}$ such that $\mu(A_N)>0$. Hence \[\int_E|f|d\mu\geq\int_{A_N}|f|d\mu\geq\int_{A_N}\frac{1}{N}=\frac{\mu(A_N)}{N}>0.\] Applying the contrapositive then gives the result.
    \item[(b)] Let $A:=\{x\in X:f(x)>0\}$. Then \[\int_Afd\mu=0\] and hence $f=0$ almost everywhere on $A$ so $\mu(A)=0$. Similarly $\mu(\{x\in X:f(x)<0\})=0$ so $\mu(\{x\in X:f(x)\neq 0\})=0$ and hence $f=0$ almost everywhere on $X$.
    \item[(c)] Let $A:=\{x\in X:f(x)\geq 0\}$ and let $B:=\{x\in X:f(x)\leq 0\}$. Then $|f|=f\mathbf{1}_A-f\mathbf{1}_B$ and so \[\int_X|f|d\mu=\int_Xf\mathbf{1}_A-f\mathbf{1}_Bd\mu.\] Furthermore, \[\int_Xfd\mu=\int_Xf\mathbf{1}_Ad\mu+\int_Xf\mathbf{1}_Bd\mu\] If \[\int_Xfd\mu\geq0\] then \[\int_Xf\mathbf{1}_Ad\mu+\int_Xf\mathbf{1}_Bd\mu=\int_Xf\mathbf{1}_Ad\mu-\int_Xf\mathbf{1}_Bd\mu\] and hence \[\int_Xf\mathbf{1}_Bd\mu=0,\] implying $f=0$ almost everywhere on $B$ and hence that $f\geq 0$ almost everywhere on $X$.

    If instead\[\int_Xfd\mu\leq0\] then \[-\int_Xf\mathbf{1}_Ad\mu-\int_Xf\mathbf{1}_Bd\mu=\int_Xf\mathbf{1}_Ad\mu-\int_Xf\mathbf{1}_Bd\mu\] so \[\int_Xf\mathbf{1}_A=0\] so $f\leq0$ almost everywhere on $X$.
    \item[(d)] $f-g$ is measurable so $\{x\in X:f(x)-g(x)=0\}\in\mathcal{M}$ and hence \[\{x\in X:f(x)\neq g(x)\}=\{x\in X:f(x)-g(x)=0\}^c\in\mathcal{M}.\]
\end{enumerate}
\end{proof}
\begin{exercise}
Let \( f : \mathbb{R} \to \mathbb{R} \) be integrable. Suppose \( \{h_n\}_{n \geq 1} \) is a sequence in \( \mathbb{R} \) such that \( h_n \to 0 \).
    
    \begin{enumerate}
        \item[(a)] Show that for any \( K \in (0, \infty) \) we have \( \int_{-K}^{K} |f(x + h_n) - f(x)|dx \to 0 \) as \( n \to \infty \). 
        
        \textit{[Hint: first suppose \( f \) is continuous, recalling that any continuous real-valued function on a compact interval is bounded. For general \( f \), use Question 43.]}
        
        \item[(b)] Show that \( \int_{-\infty}^{\infty} |f(x + h_n) - f(x)|dx \to 0 \) as \( n \to \infty \).
    \end{enumerate}
\end{exercise}
\begin{proof}
\item[(a)] First let $f$ be continuous. There exists an $M\in\mathbb{R}$ such that $|f(x)|\leq M\forall x\in[-K-\max\{|h_n|:n\in\mathbb{N}\},K+\max\{|h_n|:n\in\mathbb{N}\}]$ by the Weierstrass extreme value theorem. Hence \[|f(x+h_n)\mathbf{1}_{[-K,K]}-f(x)\mathbf{1}_{[-K,K]}|\leq|f(x+h_n)\mathbf{1}_{[-K,K]}|+|f(x)\mathbf{1}_{[-K,K]}|\leq 2M\forall x\in\mathbb{R}.\]Furthermore, \[|f(x+h_n)\mathbf{1}_{[-K,K]}-f(x)\mathbf{1}_{[-K,K]}|\to0\forall x\in [-K,K]\] so by the dominated convergence theorem\[\int_{-K}^K|f(x+h_n)-f(x)|dx=\int_\mathbb{R}|f(x+h_n)\mathbf{1}_{[-K,K]}-f(x)\mathbf{1}_{[-K,K]}|d\lambda_1\to\int_\mathbb{R}0d\lambda_1=0.\]Now drop the assumption that $f$ is continuous. Let $\epsilon>0$. Then there exists a continuous function $g:\mathbb{R}\to\mathbb{R}$ such that \[\int_{-\infty}^\infty|f(x)-g(x)|dx<\frac{\epsilon}{3}.\]Furthermore, \begin{align*}|f(x+h_n)-f(x)|&=|(f(x+h_n)-g(x+h_n))+(g(x+h_n)-g(x))+(g(x)-f(x))|\\&\leq|f(x+h_n)-g(x+h_n)|+|g(x+h_n)-g(x)|+|g(x)-f(x)|.\end{align*}We have shown that there exists an $N\in\mathbb{N}$ such that \[\int_{-K}^K|g(x+h_n)-g(x)|dx<\frac{\epsilon}{3}\forall n> N.\]Hence for all $n>N$ we have\begin{align*}\int_{-K}^K|f(x+h_n)-f(x)|dx&\leq\int_{-\infty}^\infty|f(x+h_n)-g(x+h_n)|dx+\int_{-K}^K|g(x+h_n)-g(x)|dx+\int_{-\infty}^\infty|g(x)-f(x)|dx\\&<\frac{\epsilon}{3}+\frac{\epsilon}{3}+\frac{\epsilon}{3}=\epsilon\end{align*} as required.
\item[(b)] Let $\epsilon>0$. Then there exists a $K\in\mathbb{N}$ such that \[\int_{\mathbb{R}\setminus[-K,K]}|f(x)|d\lambda_1<\frac{\epsilon}{3}\] and an $N\in\mathbb{N}$ such that \[\int_{-(K+1)}^{K+1}|f(x+h_n)-f(x)|dx<\frac{\epsilon}{3}\forall n>N.\]By the triangle inequality we have\begin{align*}\int_{\mathbb{R}\setminus[-(K+1),K+1]}|f(x+h_n)-f(x)|d\lambda_1&\leq\int_{\mathbb{R}\setminus[-(K+1),K+1]}|f(x+h_n)|d\lambda_1+\int_{\mathbb{R}\setminus[-(K+1),K+1]}|f(x)|dx\\&\leq\int_{\mathbb{R}\setminus[-(K+1),K+1]}|f(x+h_n)|d\lambda_1+\int_{\mathbb{R}\setminus[-K,K]}|f(x)|dx\\&<\int_{\mathbb{R}\setminus[-(K+1),K+1]}|f(x+h_n)|d\lambda_1+\frac{\epsilon}{3}\forall n\in\mathbb{N}.\end{align*}Now let $M\in\mathbb{N}$ be such that $|h_n|<1\forall n>M$. Then \[\{x+h_n:x\in\mathbb{R}\setminus[-(K+1),K+1],n>M\}\subseteq\mathbb{R}\setminus[-K,K]\] and hence\[\int_{\mathbb{R}\setminus[-(K+1),K+1]}|f(x+h_n)|d\lambda_1\leq\int_{\mathbb{R}\setminus[-K,K]}|f(x)|d\lambda_1<\frac{\epsilon}{3}\forall n>M.\] Thus $\forall n>\max\{N,M\}$ we have\[\int_{-\infty}^\infty|f(x+h_n)-f(x)|dx<\frac{\epsilon}{3}+\frac{\epsilon}{3}+\frac{\epsilon}{3}=\epsilon,\] implying that \[\lim_{n\to\infty}\int_{-\infty}^\infty|f(x+h_n)-f(x)|dx=0.\]
\end{proof}
\begin{exercise}
Let \( (X, \mathcal{M}, \mu) \) be a \(\sigma\)-finite measure space. Suppose \( f, f_1, f_2, \dots \in L^1(X) \) such that \( f_n \uparrow f \) pointwise and moreover \( f_n \in L^1(\mu) \) and \( \sup_n \int f_n d\mu < \infty \). Show that \( f \in L^1(\mu) \) and \( \int f d\mu \to \int f_n d\mu \) as \( n \to \infty \).
\end{exercise}
\begin{proof}
 Since \[\sup_n\int f_nd\mu<\infty\]and $f_n\uparrow f$, implying that \[\int f_nd\mu\] is increasing, we know that \[\lim_{n\to\infty}\int f_nd\mu\] exists and is finite, since increasing sequences which are bounded converge to a finite real number. Furthermore, since $|f_n^-(x)|\leq f_1^-(x)\forall n\in\mathbb{N}$, the dominated convergence theorem implies that \[\int f^-d\mu=\lim_{n\to\infty}\int f_n^-d\mu\] which is finite since \[\int f_n^-d\mu\leq\int f_1^-d\mu<\infty\forall n.\]Thus \[\lim_{n\to\infty}\int f_n^+d\mu=\lim_{n\to\infty}\int f_n+f_n^-d\mu=\lim_{n\to\infty}\int f_n+\lim_{n\to\infty}\int f_n^-d\mu<\infty.\] Furthermore, by the monotone convergence theorem we have\[\int f^+d\mu=\lim_{n\to\infty}\int f_n^+d\mu<\infty\] and hence \[\int |f|d\mu=\int f^++f^-d\mu<\infty\] so $f\in L^1(\mu)$. Finally,\begin{align*}\int fd\mu&=\int f^+-f^-d\mu\\&=\int f^+d\mu-\int f^-d\mu\\&=\lim_{n\to\infty}\int f_n^+d\mu-\lim_{n\to\infty}\int f_n^-d\mu\\&=\lim_{n\to\infty}\int f_n^+-f_n^-d\mu\\&=\lim_{n\to\infty}\int f_nd\mu.\end{align*}
\end{proof}

\begin{exercise}
Let $-\infty < a < b < \infty$. Suppose $g : [a, b] \to \mathbb{R}$ is a continuously differentiable, strictly increasing function. Show that for all bounded Borel-measurable $f : (g(a), g(b)] \to \mathbb{R}$ we have the change of variables formula $\int_{g(a)}^{g(b)} f(y)dy = \int_{a}^{b} f(g(x))g'(x)dx$. 

\textit{Hint: First verify this for $f = \mathbf{1}_{(g(a),t]}$ with $g(a) < t \leq g(b)$. Then use the Monotone Class theorem.}
\end{exercise}
\begin{proof}
Let $f=\mathbf{1}_{(g(a),t]}$ with $g(a)<t\leq g(b)$. Then\[\int_{g(a)}^{g(b)}f(y)dy=\int_\mathbb{R}\mathbf{1}_{(g(a),t]}\mathbf{1}_{(g(a),g(b))}d\mu=\int_{g(a)}^{t}dy=t-g(a)\] and\[\int_a^bf(g(x))g'(x)dx=\int_a^b\mathbf{1}_{g(x)\in(g(a),t]}g'(x)dx=\int_a^{g^{-1}(t)}g'(x)dx=[g(x)]_a^{g^{-1}(t)}=t-g(a).\] Thus the result holds in this case. Now let $\mathcal{H}$ be the set of bounded Borel-measurable functions $f:(g(a),g(b)]\to\mathbb{R}$ such that the change of variables formula holds and let \[\mathcal{D}:=\{(g(a),t]:g(a)<t\leq g(b)\}.\] Given $t_1,t_2\in(g(a),g(b)]$ we have $(g(a),t_1]\cap(g(a),t_2]=(g(a),\min(t_1,t_2)]\in\mathcal{D}$ so $\mathcal{D}$ is a $\pi$-system. Furthermore, we have shown that $A\in\mathcal{D}\implies\mathbf{1}_A\in\mathcal{H}$, with $\mathbf{1}_A$ being Borel-measurable due to $A$ being a measurable set. We also have that $(g(a),g(b)]\in\mathcal{D}$ so the first condition of the monotone class theorem is satisfied. Now let $p,q\in\mathcal{H}$. Then\begin{align*}\int_{g(a)}^{g(b)}(p+q)(y)dy&=\int_{g(a)}^{g(b)}p(y)dy+\int_{g(a)}^{g(b)}q(y)dy\\&=\int_a^bp(g(x))g'(x)dx+\int_a^bq(g(x))g'(x)dx\\&=\int_a^b(p+q)(g(x))g'(x)dx\end{align*} so $p+q\in\mathcal{H}$. Also, given $\alpha\in\mathbb{R}$ we have\[\int_{g(a)}^{g(b)}\alpha p(y)dy=\alpha\int_{g(a)}^{g(b)}p(y)dy=\int_a^b\alpha p(g(x))g'(x)dx\] so $\alpha p\in\mathcal{H}$ so the second condition of the monotone class theorem is satisfied. Now let $f_n\in\mathcal{H}$ for $n\in\mathbb{N}$ with $0\leq f_n\uparrow f$ pointwise where $f$ is bounded. Then by the monotone convergence theorem \[\int_{g(a)}^{g(b)}f(y)dy=\lim_{n\to\infty}\int_{g(a)}^{g(b)}f_n(y)dy=\lim_{n\to\infty}\int_a^bf_n(g(x))g'(x)dx.\] Since $g$ is strictly increasing we have that $g'\geq0$ so we can apply the monotone convergence theorem again to obtain\[\int_{g(a)}^{g(b)}f(y)dy=\lim_{n\to\infty}\int_a^bf_n(g(x))g'(x)dx=\int_a^bf(g(x))g'(x)dx\] and hence $f\in\mathcal{H}$. Thus the monotone class theorem implies that $\mathcal{H}$ contains every bounded measurable function with respect to $\sigma(\mathcal{D})=\mathcal{B}_{(g(a),g(b)]}$ as required.
\end{proof}

\begin{exercise}
\begin{itemize}
    \item[(a)] Show that $\{(x,y) \in \mathbb{R}^2 : x < y\} \in \mathcal{B} \otimes \mathcal{B}$.
    \item[(b)] Let $c \in (0,\infty)$. Show that $\{(x,y) \in \mathbb{R}^2 : x < y \leq x + c\} \in \mathcal{B} \otimes \mathcal{B}$.
    \item[(c)] Suppose $\mu$ is a probability measure on $(\mathbb{R}, \mathcal{B})$. For $x \in \mathbb{R}$, let $F(x) = \mu((-\infty, x])$. Let $c \in \mathbb{R}$. Use Fubini’s Theorem to show that $\int_{-\infty}^{\infty} (F(x+c) - F(x))dx = c$.
\end{itemize}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item[(a)] Define $\pi_1:\mathbb{R}^2\to\mathbb{R}:(x,y)\mapsto x$ and $\pi_2:\mathbb{R}^2\to\mathbb{R}:(x,y)\mapsto y$. Given any $\alpha\in\mathbb{R}$ we have $\pi_1^{-1}((\alpha,\infty])=(\alpha,\infty)\times\mathbb{R}\in\mathcal{B}\otimes\mathcal{B}$ so $\pi_1$ is measurable. Similarly $\pi_2$ is measurable. Hence $\pi_1-\pi_2$ is measurable so\[\{(x,y)\in\mathbb{R}^2:x<y\}=(\pi_1-\pi_2)^{-1}((-\infty,0))\in\mathcal{B}\otimes\mathcal{B}.\]
    \item[(b)] We have \[\{(x,y)\in\mathbb{R}^2:y\leq x+c\}=(\pi_2-\pi_1)((-\infty,c])\in\mathcal{B}\otimes\mathcal{B}\] so\[\{(x,y)\in\mathbb{R}^2:x<y\leq x+c\}=\{(x,y)\in\mathbb{R}^2:x<y\}\cap\{(x,y)\in\mathbb{R}^2:y\leq x+c\}\in\mathcal{B}\otimes\mathcal{B}.\]
    \item[(c)] We have that \[F(y)=\int_\mathbb{R}\mathbf{1}_{(-\infty,y]}d\mu\forall y\in\mathbb{R}\] so\begin{align*}\int_{-\infty}^\infty(F(x+c)-F(x))dx&=\int_\mathbb{R}\int_\mathbb{R}\mathbf{1}_{(-\infty,x+c]}\mu(dy)-\int_\mathbb{R}\mathbf{1}_{(-\infty,x]}\mu(dy) \lambda_1(dx)\\&=\int_\mathbb{R}\int_\mathbb{R}\mathbf{1}_{(x,x+c]}\mu(dy)\lambda_1(dx)\\&=\int_\mathbb{R}\int_\mathbb{R}f(x,y)\mu(dy)\lambda_1(dx)\end{align*} where we let \[f:=\mathbf{1}_{\{(x,y)\in\mathbb{R}^2:x<y\leq x+c\}}.\] Since we have shown that $f$ is $\mathcal{B}\otimes\mathcal{B}$ and $f\geq 0$, Fubini's theorem implies that\[\int_{-\infty}^\infty(F(x+c)-F(x))dx=\int_\mathbb{R}\int_\mathbb{R}f(x,y)\lambda_1(dx)\mu(dy).\] For a fixed $y$, \[f_y:=\mathbf{1}_{\{x\in\mathbb{R}:x<y\leq x+c\}}=\mathbf{1}_{\{x\in\mathbb{R}:x<y\}}\mathbf{1}_{\{x\in\mathbb{R}:x\geq y-c\}}=\mathbf{1}_{[y-c,y)}\]so\[\int_\mathbb{R}\int_\mathbb{R}f(x,y)\lambda_1(dx)\mu(dy)=\int_\mathbb{R}\int_\mathbb{R}\mathbf{1}_{[y-c,y)}\lambda_1(dx)\mu(dy)=\int_\mathbb{R}cd\mu=c\int_\mathbb{R}d\mu.\] Since $\mu$ is a probability measure we have \[\int_\mathbb{R}d\mu=1\] so \[\int_{-\infty}^\infty(F(x+c)-F(x))dx=c\] as required.
\end{enumerate}
\end{proof}

\begin{exercise}
For $d \in \mathbb{N}$ let $\lambda_d$ denote $d$-dimensional Lebesgue measure.
\begin{itemize}
    \item[(a)] Show that $\lambda_2$ and $\lambda_1 \otimes \lambda_1$ are the same measure on $(\mathbb{R}^2, \mathcal{B}_2)$.
    \item[(b)] Let $A \subset \mathbb{R}^2$ be a Borel set, and for $x \in \mathbb{R}$ let $A_x := \{y \in \mathbb{R} : (x, y) \in A\}$. Show that
    \[
    \lambda_2(A) = \int_{-\infty}^{\infty} \lambda_1(A_x)dx.
    \]
\end{itemize}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item[(a)] $\lambda_2$ and $\lambda_1\otimes\lambda_1$ agree on the $\pi$-system $\mathcal{B}\times\mathcal{B}$ and $\lambda_1\otimes\lambda_1$ is $\sigma$-finite on $\mathcal{B}\times\mathcal{B}$ so $\lambda_2$ and $\lambda_1\otimes\lambda_1$ agree on $\sigma(\mathcal{B}\times\mathcal{B})=\mathcal{B}\otimes\mathcal{B}=\mathcal{B}_2$ by the uniqueness lemma.
    \item[(b)] By Fubini's theorem and the above we have \begin{align*}\lambda_2(A)&=\int_{\mathbb{R}^2}\mathbf{1}_Ad\lambda_2\\&=\int_{\mathbb{R}^2}\mathbf{1}_Ad(\lambda_1\otimes\lambda_1)\\&=\int_\mathbb{R}\int_\mathbb{R}\mathbf{1}_{A_x}\lambda_1(dy)\lambda_1(dx)\\&=\int_\mathbb{R}\lambda_1(A_x)\lambda_1(dx)\\&=\int_{-\infty}^\infty\lambda_1(A_x)dx.\end{align*}
\end{enumerate}
\end{proof}

\begin{exercise}
For $A \subset \mathbb{R}^d$ and $u \in \mathbb{R}^d$ let $A + u := \{a + u : a \in A\}$. Also if $d = 2$, for $x \in \mathbb{R}$ set $A_x := \{y \in \mathbb{R} : (x, y) \in A\}$.
\begin{itemize}
    \item[(a)] Let $-\infty < a < b < \infty$, and let $I = (a,b)$. Let $y \in (0,\infty)$. Compute $\lambda_1((I + y) \setminus I)$.
    \item[(b)] Let $B \subset [0,1]^2$ and suppose $B$ is open (see Question 26) and $B$ is convex, i.e. for all $u,v \in B$ and $\alpha \in (0,1)$, we have $\alpha u + (1-\alpha)v \in B$. Let $e$ be the unit vector $(0,1)$ and for $t > 0$ let $B(t) := B + te$. Given $x \in \mathbb{R}$, show that $B(t)_x = B_x + t$.
    \item[(c)] Let $B$ be as in Part (b). Show that $\lambda_1((B(t) \setminus B)_x) = \min(t, \lambda_1(B_x))$.
    \item[(d)] Let $B$ be as in Part (b). Show that $\lambda_2(B(t) \setminus B) \leq t$.
    \item[(e)] Let $B$ be as in Part (b). Let $\pi_2 : \mathbb{R}^2 \to \mathbb{R}$ denote projection onto the first co-ordinate, i.e. for $(x,y) \in \mathbb{R}^2$ we set $\pi_2((x,y)) = x$. Show that $\frac{\lambda_2(B(t) \setminus B)}{t} \to \lambda_1(\pi_2(B))$ as $t \downarrow 0$.
    
    \textit{[The hint for Question 45 is also relevant here.]}
\end{itemize}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item[(a)] If $a+y\geq b$ then \[\lambda_1((I+y)\setminus I)=\lambda_1((a+y,b+y)\setminus(a,b))=\lambda_1((a+y,b+y))=b-a.\]
    Otherwise,\[\lambda_1((I+y)\setminus I)=\lambda_1((a+y,b+y)\setminus(a,b))=\lambda_1([b,b+y))=y.\] Hence $\lambda_1((I+y)\setminus I)=\min(y,b-a)$.
    \item[(b)] \begin{align*}B(t)_x&=\{y\in\mathbb{R}:(x,y)\in B+te\}\\&=\{y\in\mathbb{R}:(x,y)\in B+(0,t)\}\\&=\{y\in\mathbb{R}:(x,y-t)\in B\}\\&=B_x+t.\end{align*}
    \item[(c)] We have that \begin{align*}(B(t)\setminus B)_x&=((B+te)\setminus B)_x\\&=\{y\in\mathbb{R}:(x,y)\in (B+te)\setminus B\}\\&=\{y\in\mathbb{R}:(x,y)\in B+te\}\setminus\{y\in\mathbb{R}:(x,y)\in B\}\\&=(B_x+t)\setminus B_x.\end{align*}$B$ is convex so $B_x$ is an interval $(a,b)$ (with $a$ and $b$ not included due to $B$ being open), and $B_x+t$ is $(a+t,b+t)$. Hence by part (a) we have $\lambda_1((B_x+t)\setminus B_x)=\min(t,\lambda_1(B_x))$ as required.
    \item[(d)] \begin{align*}\lambda_2(B(t)\setminus B)&=\int_{-\infty}^\infty\lambda_1((B(t)\setminus B)_x)dx\\&=\int_{-\infty}^\infty\min(t,\lambda_1(B_x))dx\\&=\int_0^1\min(t,\lambda_1(B_x))dx\\&\leq\int_0^1 tdx=t.\end{align*}
    \item[(e)] Let $(t_n)_{n\in\mathbb{N}}$ be a sequence such that $t_n\downarrow 0$ as $n\to\infty$. We have \[\frac{\lambda_2(B(t_n)\setminus B)}{t_n}=\frac{1}{t_n}\int_0^1\min(t_n,\lambda_1(B_x))dx=\int_0^1\min(1,\frac{\lambda_1(B_x)}{t_n})dx.\] If we define $f_n:[0,1]\to[0,\infty]:x\mapsto\min(1,\frac{\lambda_1(B_x)}{t_n})$ then $f_n$ is measurable $\forall n\in\mathbb{N}$ and $f_n\uparrow\mathbf{1}_{\pi_2(B)}$, since if $x\not\in\pi_2(B)$ then $f_n(x)=0\forall n$, whereas if $x\in\pi_2(B)$ then $\frac{\lambda_1(B_x)}{t_n}>1$ for sufficiently large $n$. Furthermore, $\mathbf{1}_{\pi_2(B)}$ is measurable as the limit of measurable functions. Hence by the monotone convergence theorem we have\[\lim_{n\to\infty}\frac{\lambda_2(B(t_n)\setminus B)}{t_n}=\int_0^1\mathbf{1}_{\pi_2(B)}dx=\lambda_1(\pi_2(B)).\] Hence \[\frac{\lambda_2(B(t)\setminus B)}{t}\to\lambda_1(\pi_2(B))\] as $t\downarrow 0$.
\end{enumerate}
\end{proof}

\begin{exercise}
Let $(X, \mathcal{M})$ be a measurable space and suppose $f : X \to [0,\infty]$ and $g : X \to [0,\infty]$ are Borel functions. Show that
\[
\int_{0}^{\infty} \int_{0}^{\infty} \mu(\{x \in X : f(x) > s, g(x) > t\})dsdt = \int_{X} f(x)g(x)\mu(dx).
\]
\end{exercise}
\begin{proof}
Repeatedly applying Fubini's theorem gives\begin{align*}
\int_{0}^{\infty} \int_{0}^{\infty} \mu(\{x \in X : f(x) > s, g(x) > t\})dsdt&=\int_0^\infty\int_0^\infty\mu(f^{-1}((s,\infty))\cap g^{-1}((t,\infty)))dsdt\\&=\int_0^\infty\int_0^\infty\int_X\mathbf{1}_{f^{-1}((s,\infty))}\mathbf{1}_{g^{-1}((t,\infty))}\mu(dx) dsdt\\&=\int_0^\infty\int_0^\infty\int_X\mathbf{1}_{f(x)>s}\mathbf{1}_{g(x)>t}\mu(dx) dsdt\\&=\int_0^\infty\int_X\int_0^\infty\mathbf{1}_{f(x)>s}\mathbf{1}_{g(x)>t}ds\mu(dx) dt\\&=\int_0^\infty\int_X\mathbf{1}_{g(x)>t}\int_0^\infty\mathbf{1}_{f(x)>s}ds\mu(dx) dt\\&=\int_0^\infty\int_X\mathbf{1}_{g(x)>t}\int_0^{f(x)}1ds\mu(dx) dt\\&=\int_0^\infty\int_X\mathbf{1}_{g(x)>t}f(x)\mu(dx)dt\\&=\int_X\int_0^\infty\mathbf{1}_{g(x)>t}f(x)dt\mu(dx)\\&=\int_Xf(x)\int_0^\infty\mathbf{1}_{g(x)>t}dt\mu(dx)\\&=\int_Xf(x)g(x)\mu(dx).\end{align*}
\end{proof}

\begin{exercise}
\begin{itemize}
    \item[(a)] Let $\alpha \in \mathbb{R}$ be a fixed constant. Let $f(x)=x^\alpha$ for $x\in (0,1]$. Determine the values of $p\in [1,\infty)$ (depending on $\alpha$), such that $f\in L^p((0,1])$.
    \item[(b)] Let $\alpha \in \mathbb{R}$, and let $g(x) = x^{\alpha}$ for $x \in [1,\infty)$. Determine for values of $p\in[1,\infty)$ (depending on $\alpha$) such that $g\in L^p([1,\infty))$.
\end{itemize}
\end{exercise}
\begin{proof}
\begin{enumerate}
    \item[(a)] If $\alpha p\neq -1$ then\[\int_0^1|f(x)|^pdx=\int_0^1x^{\alpha p}dx=[\frac{x^{\alpha p+1}}{\alpha p+1}]_0^1\]If $\alpha p > -1$ then the integral converges, and if $\alpha p < -1$ then the integral diverges. If $\alpha p=-1$ then\[\int_0^1|f(x)|^pdx=\int_0^1\frac{1}{x}dx=\lim_{t\downarrow0}\int_t^1\frac{1}{x}dx=\lim_{t\downarrow 0}[\ln(x)]_t^1=-\lim_{t\downarrow0}\ln(t)=\infty.\] Hence $f\in L^p((0,1])$ if and only if $\alpha p> -1$.
    \item[(b)] If $\alpha p\neq -1$ then\[\int_1^\infty x^{\alpha p}dx=\lim_{n\to\infty}[\frac{x^{\alpha p+1}}{\alpha p +1}]_1^n=\lim_{n\to\infty}\frac{n^{\alpha p+1}}{\alpha p+1}-\frac{1}{\alpha p +1}.\] If $\alpha p+1>0$ then $\lim_{n\to\infty}n^{\alpha p+1}=\infty$. If $\alpha p+1<0$ then $\lim_{n\to\infty}n^{\alpha p+1}=0$. If $\alpha p =-1$ then\[\int_1^\infty x^{\alpha p}dx=\lim_{n\to\infty}[\ln(x)]_1^n=\lim_{n\to\infty}\ln(n)=\infty.\] Hence $g\in L^p([1,\infty))$ if and only if $\alpha p < -1$.
\end{enumerate}
\end{proof}

\begin{exercise}
Let $p \in [1, \infty)$ and let $f \in L^p(\mathbb{R})$. Let $(a_n)_{n \geq 1}$ and $(b_n)_{n \geq 1}$ be real-valued sequences such that $\sum_{n=1}^{\infty} |a_n| < \infty$. Show that the sequence of functions $f_n(x) := \sum_{k=1}^{n} a_k f(x - b_k)$ converges in $L^p(\mathbb{R})$.
\end{exercise}
\begin{proof}
Let $\epsilon >0$. There exists an $N\in\mathbb{N}$ such that $\sum_{k=n}^\infty |a_k|<\frac{\epsilon}{\|f\|_p}\forall n\geq N$. Then $\forall n>m>N$ we have\[\|f_n-f_m\|_p=\sqrt[p]{\int_{-\infty}^\infty |\sum_{k=m+1}^na_kf(x-b_k)|^pdx}\leq\sum_{k=m+1}^n\sqrt[p]{\int_{-\infty}^\infty|a_kf(x-b_k)|^pdx}\] by Minkowski's inequality. Hence,\begin{align*}\|f_n-f_m\|_p&\leq\sum_{k=m+1}^n|a_k|\sqrt[p]{\int_{-\infty}^\infty |f(x-b_k)|^pdx}\\&=\sum_{k=m+1}^n|a_k|\|f\|_p\\&\leq\|f\|_p\sum_{k=m+1}^\infty|a_k|\\&<\|f\|_p\cdot\frac{\epsilon}{\|f\|_p}=\epsilon.
\end{align*} Hence $f_n$ is a Cauchy sequence in $L^p(\mathbb{R})$ so converges in $L^p(\mathbb{R})$ by the Riesz-Fischer theorem.
\end{proof}

\begin{exercise}
Suppose $(a_n)_{n \geq 1}$ and $(b_n)_{n \geq 1}$ are sequences of nonnegative numbers, such that $A := \sum_{n=1}^{\infty} a_n^{4/3} < \infty$ and $B := \sum_{n=1}^{\infty} b_n^4 < \infty$. Show that $\sum_{n=1}^{\infty} a_n b_n \leq A^{3/4} B^{1/4}$.
\end{exercise}

\begin{exercise}
Suppose that $(X, \mathcal{M}, \mu)$ is a $\sigma$-finite measure space, and $1 \leq p < q < \infty$.
\begin{itemize}
    \item[(a)] Show that if $\mu$ is a probability measure and $f \in L^q(\mu)$, then $\|f\|_p \leq \|f\|_q$.

    \textit{[Hint: note that $f = f \cdot 1$, and apply Hölder’s inequality]}
    
    \item[(b)] Show that if $\mu(X) < \infty$ then $L^q(\mu) \subset L^p(\mu)$.
    
    \item[(c)] Give an example to show that if $\mu(X) = \infty$, then we might not have $L^q(\mu) \subset L^p(\mu)$.
\end{itemize}
\end{exercise}

\begin{exercise}
Let $(X, \mathcal{M}, \mu)$ be a $\sigma$-finite measure space. Let $p \in (1, \infty)$. Suppose $f \in \mathbb{R}(X)$ and (for all $n \in \mathbb{N}$) $f_n \in \mathbb{R}(X)$, with $\sum_{n=1}^{\infty} \|f_n\|_p < \infty$. For all $n \in \mathbb{N}$ and $x \in X$, set
\[
g_n(x) = \sum_{k=1}^{n} |f_k(x)| \quad \text{and} \quad g_{\infty}(x) = \sum_{k=1}^{\infty} |f_k(x)|.
\]
\begin{itemize}
    \item[(i)] Show that $\|g_n\|_p \to \|g_{\infty}\|_p$ as $n \to \infty$, and deduce that $\|g_{\infty}\|_p < \infty$.
    
    \item[(ii)] Show that the function $h(x) := \sum_{m=1}^{\infty} f_n(x)$ is well-defined and finite $\mu$-a.e., that is, the sum converges for $\mu$-a.e. $x \in X$.
\end{itemize}
\end{exercise}

\begin{exercise}
Let $W \in \mathcal{B}$, and for $f, g \in L^2(W)$, write $\langle f, g \rangle = \int_W f(x)g(x)dx$. Show that if also $h \in L^2(W)$ and $a, b \in \mathbb{R}$ then $\langle f, g + h \rangle = \langle f, g \rangle + \langle f, h \rangle$.
\end{exercise}

\begin{exercise}
For $n \in \mathbb{N}$, let $f_n(x) = \sin(n x)$.
\begin{itemize}
    \item[(a)] Show that for $n, m \in \mathbb{N}$ with $n \neq m$ we have $\int_0^{2\pi} f_n(x) f_m(x)dx = 0$.
    
    \textit{[Hint: recall that $\cos(a + b) = \cos a \cos b - \sin a \sin b$.]}
    
    \item[(b)] Show that $\|f_n\|_2^2 = \sum_{k=1}^{n} k^{-1}$. Show that in $L^2([0,2\pi])$ we have $\|g_n\|_2^2 = \pi \sum_{k=1}^{n} k^{-2}$.
    
    \item[(c)] Prove that there exists $g \in L^2([0,2\pi])$ such that $g_n \to g$ in $L^2([0,2\pi])$ as $n \to \infty$.
\end{itemize}
\end{exercise}

\end{document}
